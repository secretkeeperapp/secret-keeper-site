{"version":3,"sources":["SecretList.js","TestatorSecretView.js","CustomMenu.js","CustomAppBar.js","AppSetup.js","BeneficiarySecretView.js","MainApp.js","BeneficiarySecretList.js","HomeContent.js","GuideContent.js","FAQContent.js","Homepage.js","Routing.js","index.js","lib/enigma-utils.js","../node_modules/web3c/web3c sync","static/hardware_wallet_instructions.md"],"names":["Transition","props","react_default","a","createElement","Slide_default","Object","assign","direction","SecretList","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleCloseEdit","setState","openEdit","handleOpenEdit","handleCloseDelete","event","openDeleteDialog","indexToDelete","undefined","handleOpenDelete","index","currSecretName","secrets","closeAndDelete","handleDelete","state","_this2","classes","currAccount","Type","Address","secretName","name","className","root","style","paddingTop","substring","length","List_default","map","value","ListItem_default","key","role","dense","button","selected","currSecretIndex","onClick","handleViewOnClick","ListItemText_default","primary","ListItemSecondaryAction_default","IconButton_default","aria-label","handleEditClick","Edit_default","Delete_default","Button_default","panelActionType","handleCancel","handleNewSecret","color","variant","disabled","secretKeeperContract","SecretList_DeleteDialog","React","Component","DeleteDialog","react","Dialog_default","open","TransitionComponent","keepMounted","onClose","aria-labelledby","aria-describedby","DialogTitle_default","id","Divider_default","DialogContent_default","DialogContentText_default","DialogActions_default","withStyles","theme","margin","spacing","unit","width","maxWidth","backgroundColor","palette","background","paper","toolbarButtons","marginLeft","customWidth","noMaxWidth","engUtils","require","TestatorSecretView","handleClickOpen","toggleSecret","prevState","showDecryptedSecret","displaySecret","secret","actionType","network","ascii","window","web3","utils","toAscii","derivedKey","getDerivedKey","decryptMessage","getDecryptedValue","getDecryptedValueFromHex","shouldDisable","secretViewLoading","secretProp","editableSecret","secretUndefinedView","padding","blankName","toStr","badAddress","isAddress","fontSize","Tooltip_default","title","Info_default","TextField_default","textField","onChange","updateEditable","helperText","error","fullWidth","multiline","rows","paddingBottom","input","timeBeforeReveal","updateTimeEditable","label","type","inputProps","maxLength","FormControlLabel_default","paddingLeft","control","Switch_default","checked","beneficiary_addr","handleSave","container","display","flexWrap","marginRight","marginTop","menu","shortAddr","addr","CustomMenuItem","aria-owns","menuOpen","menuName","aria-haspopup","handleMenu","renderSelected","Popper_default","anchorEl","transition","disablePortal","_ref","TransitionProps","placement","Grow_default","transformOrigin","Paper_default","ClickAwayListener_default","onClickAway","handleClose","renderMenuList","CustomMenu","menuOpenMobile","viewDialogOpen","dialog-account","dialog-contract","menuItems","renderFunc","Fragment","MenuList_default","item","MenuItem_default","handleMenuItemClick","currMenuIndices","renderListedAccount","account","renderListedContract","contract","address","renderListedRole","renderSelectedContract","val","allContracts","prefix","renderSelectedRole","allRoles","renderSelectedAccount","allAccounts","setCurrMenuIndex","currentTarget","handleMenuMobile","handleCloseMobile","handleCloseViewDialog","kind","viewDialogOpenC","JSON","parse","stringify","handleOpenViewDialog","_this3","contracts","accounts","roles","react_responsive_default","query","Menu_default","_ref2","Divider_Divider_default","ListSubheader_default","CustomMenu_ViewInfoDialog","body","CustomMenu_CustomMenuItem","currAccountIndex","ViewInfoDialog","flexGrow","grow","menuButton","CustomAppBar","currRole","currContract","renderCustomMenu","setupComplete","src_CustomMenu","AppBar_default","position","Toolbar_default","LockOpen_default","icon","Typography_default","Link","to","textDecoration","AppSetup","isSetupComplete","metamaskInstalled","metamaskUnlocked","includes","disclaimerChecked","CssBaseline_default","layout","component","align","secondary","href","target","ListItemIcon_default","Checkbox_default","handleCheckDisclaimer","heroButtons","Grid_default","justify","handleLaunch","handleReload","appBar","defineProperty","breakpoints","up","marginBottom","buttons","justifyContent","BeneficiarySecretView","canDecryptSecret","parseInt","lastCheckIn","convertJSONToMS","currTs","ts","Date","toLocaleString","owner_addr","decryptSecret","decryptedSecret","web3c","OasisSecretKeeperContract","BeneficiarySecretList","GAS","OASIS_DEVNET","ROPSTEN","Web3c","createMuiTheme","createPalette","light","main","dark","contrastText","typography","useNextVariants","MainApp","getCurrWeb3cTimestamp","asyncToGenerator","regenerator_default","mark","_callee","currBlock","wrap","_context","prev","next","Web3","providers","HttpProvider","eth","getBlock","sent","timestamp","console","log","abrupt","currTimestamp","stop","setWeb3AccountsIfMetamaskUnlocked","err","addAccounts","registerRopstenContractInstance","setWeb3cAccountsIfMetamaskUnlocked","registerOasisContractInstance","i","push","fetchWeb3Accounts","getAccounts","fetchWeb3cAccounts","currentProvider","getContractInfo","secretKeeperContractDefinition","networks","oasisSecretKeeperContractDefinition","mmState","allSecrets","checkInErrMsg","checkInLoading","secretViewErrMsg","shouldLaunch","newInds","getSecretsForTestator","getSecretsForBeneficiary","loadWeb3","_callee2","msg","_context2","ethereum","isMetamaskInstalled","enable","logNetworkModern","getCurrTimestamp","Promise","then","t0","metamaskSetup","handleChange","auth","toEdit","copy","handleReloadSetup","_ref3","_callee3","_context3","editSecret","addNewSecret","_x","apply","arguments","editedSecret","timeKey","currActionType","methods","deleteTestatorSecretInfoByIndex","send","from","gas","result","catch","message","handleRefresh","getLastCheckIn","handleCheckIn","_ref4","_callee4","_context4","ReactGA","category","action","doCheckIn","_x2","handleDecryptSecret","decryptSecretForBeneficiary","receipt","getPastEvents","_from","fromBlock","blockNumber","toBlock","result2","returnValues","isMetaMask","net","getNetworkType","w3","checkIn","contractAddr2","SecretKeeper","setProvider","at","instance2","_this4","intTs","oasis","Contract","abi","getSecretsForTestatorOasis","_this5","staticSecrets","numSecrets","getNumSecretsForBeneficiary","_context10","promises","allPromises","getSecretForBeneficiary","genPromisesArr","all","response","testator_notes","beneficiary_notes","beneficiaryNote","_this6","convertMS","owner","t1","instance","getSecretsForBeneficiaryOasis","names","timeBeforeReveals","lastCheckIns","owners","beneficiaryNotes","_this7","getNumSecretsForTestator","_context12","getSecretForTestator","_this8","time","beneficiary","contractInstance","times","beneficiaries","_this9","ms","h","m","s","Math","floor","days","hours","minutes","seconds","obj","_this10","newSecret","timeDelayMs","convertJSONtoMS","getEncryptedValue","beneficiaryAddr","asciiToHex","editTestatorSecretInfo","_this11","_OasisSecretKeeperCon","args","addTestatorSecretInfo","_this$state$secretKee","concat","_this12","core_styles","src_CustomAppBar","src_AppSetup","renderMainGrid","useMobileLayout","gridDirection","leftPaneWidth","rightPaneWidth","alignItems","alignContent","xs","src_SecretList","src_BeneficiarySecretList","IconButton_IconButton_default","Refresh_default","CircularProgress_default","progress","renderCheckInPanel","renderSecretPanel","src_TestatorSecretView","src_BeneficiarySecretView","handleRetrieveSecret","CssBaseline","encryptMessage","HomeContent","match","heroContent","gutterBottom","lib","dist_es6","iconStyle","VpnKey_default","Computer_default","Web_default","SaveAlt_default","Timer_default","DefaultCodeRenderer","ReactMarkdown","renderers","code","DefaultBQRenderer","blockquote","CodeRenderer","overflowY","BQRenderer","GuideContent","terms","fetch","guideContentPath","text","react_markdown_default","source","GuideContentFunc","paddingRight","GuideContent_GuideContent","FAQContent","footers","description","Homepage","handleMenuIconClick","handleMenuIconClose","Lock_default","noWrap","toolbarTitle","core_Menu_default","Boolean","es_Switch","Route","exact","path","FAQContentFunc","classNames","footer","ind","@global","common","white","flex","borderTop","divider","App","src_MainApp","Home","src_Homepage","Routing","HashRouter","initialize","pageview","ReactDOM","render","src_Routing","document","querySelector","web3Utils","RLP","forge","pki","BN","EthCrypto","EC","ec","Buffer","INTEL_CA","readCert","pem","cert","certificateFromPem","e","verified","exports","encodeReport","report","sig","encode","toString","test","generateTaskId","dappContract","callable","callableArgs","soliditySha3","t","v","verifyWorker","signer","encodedReport","reportArgs","decode","caStore","reportCert","reportSig","md","sha256","create","update","publicKey","verify","digest","bytes","createCaStore","verifyCertificateChain","reportContent","isvEnclaveQuoteBody","slice","parseAddress","selectWorker","seed","taskId","workers","hash","toBN","mod","checkMethodSignature","methodSig","toAddress","sign","privateKey","enclavePublicKey","clientPrivateKey","client_key","keyFromPrivate","shared_points","keyFromPublic","getPublic","mul","getPrivate","y","getY","isOdd","x","getX","y_buffer","x_buffer","toHex","key_hex","msg_buf","iv","random","getBytesSync","util","createBuffer","putInt32","isBN","toBuffer","Error","hexToBytes","cipher","createCipher","start","finish","output","putBuffer","mode","tag","putBytes","decipher","createDecipher","getBytes","webpackEmptyContext","req","keys","resolve","module","__webpack_require__","p"],"mappings":"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","file":"static/js/main.69581b85.chunk.js","sourcesContent":["import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Slide from \"@material-ui/core/Slide\";\nimport Divider from \"@material-ui/core/Divider\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing.unit * 2\n  },\n  root: {\n    width: \"100%\",\n    maxWidth: 540,\n    backgroundColor: theme.palette.background.paper\n  },\n  toolbarButtons: {\n    marginLeft: \"auto\"\n  },\n  customWidth: {\n    maxWidth: 500\n  },\n  noMaxWidth: {\n    maxWidth: \"none\"\n  }\n});\n\nfunction Transition(props) {\n  return <Slide direction=\"up\" {...props} />;\n}\n\nclass SecretList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openDeleteDialog: false,\n      currSecretName: undefined,\n      indexToDelete: undefined,\n      openEdit: false\n    };\n  }\n\n  handleCloseEdit = () => {\n    this.setState({ openEdit: false });\n  };\n\n  handleOpenEdit = () => {\n    this.setState({ openEdit: true });\n  };\n\n  handleCloseDelete = event => {\n    this.setState({ openDeleteDialog: false, indexToDelete: undefined });\n  };\n\n  handleOpenDelete = index => event => {\n    this.setState({\n      openDeleteDialog: true,\n      currSecretName: this.props.secrets[index][\"name\"],\n      indexToDelete: index\n    });\n  };\n\n  closeAndDelete = index => event => {\n    this.setState({ indexToDelete: undefined, openDeleteDialog: false });\n    this.props.handleDelete(index)(null);\n  };\n\n  render() {\n    const { classes } = this.props;\n    const secrets = this.props.secrets;\n    let currAccount =\n      this.props.currAccount === undefined\n        ? { Type: \"None\", Address: \"None\" }\n        : this.props.currAccount;\n    const secretName =\n      this.state.indexToDelete === undefined\n        ? \"NONE\"\n        : secrets[this.state.indexToDelete].name;\n    return (\n      <div className={classes.root}>\n        <div style={{ paddingTop: 5 }}>\n          <strong>{\"Testator Address: \"}</strong>\n          <br />\n          {currAccount[\"Address\"].substring(0, 10) + \"...\"}\n        </div>\n        <div style={{ paddingTop: 10 }}>\n          <strong>{\"Secrets (\" + secrets.length + \")\"}</strong>\n        </div>\n        <List>\n          {secrets.map((value, index) => {\n            return (\n              <ListItem\n                key={index}\n                role={undefined}\n                dense\n                button\n                selected={this.props.currSecretIndex === index}\n                onClick={this.props.handleViewOnClick(index)}\n              >\n                <ListItemText primary={value[\"name\"]} />\n                <ListItemSecondaryAction>\n                  <IconButton\n                    aria-label=\"Edit\"\n                    onClick={this.props.handleEditClick(index)}\n                  >\n                    <EditIcon />\n                  </IconButton>\n                  <IconButton\n                    onClick={this.handleOpenDelete(index)}\n                    aria-label=\"Delete\"\n                  >\n                    <DeleteIcon />\n                  </IconButton>\n                </ListItemSecondaryAction>\n              </ListItem>\n            );\n          })}\n        </List>\n        <Button\n          onClick={\n            this.props.panelActionType === \"New\"\n              ? this.props.handleCancel\n              : this.props.handleNewSecret\n          }\n          color={this.props.panelActionType === \"New\" ? \"secondary\" : \"primary\"}\n          variant={\"contained\"}\n          disabled={\n            this.props.panelActionType === \"New\" ||\n            this.props.secretKeeperContract === undefined\n          }\n          className={classes.button}\n        >\n          {\"New Secret\"}\n        </Button>\n        <DeleteDialog\n          openDeleteDialog={this.state.openDeleteDialog}\n          handleCloseDelete={this.handleCloseDelete}\n          closeAndDelete={this.closeAndDelete}\n          indexToDelete={this.state.indexToDelete}\n          secretName={secretName}\n        />\n      </div>\n    );\n  }\n}\n\nSecretList.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nclass DeleteDialog extends React.Component {\n  render() {\n    return (\n      <Fragment>\n        <Dialog\n          open={this.props.openDeleteDialog}\n          TransitionComponent={Transition}\n          keepMounted\n          onClose={this.props.handleCloseDelete}\n          aria-labelledby=\"alert-dialog-slide-title\"\n          aria-describedby=\"alert-dialog-slide-description\"\n        >\n          <DialogTitle id=\"alert-dialog-slide-title\">\n            {\"Confirm Delete\"}\n          </DialogTitle>\n          <Divider />\n          <DialogContent>\n            <div>\n              <div>\n                <strong>\n                  {'Are you sure you want to delete the secret \"' +\n                    this.props.secretName +\n                    '\"?'}\n                </strong>\n              </div>\n            </div>\n            <DialogContentText id=\"alert-dialog-slide-description\" />\n          </DialogContent>\n          <DialogActions>\n            {/*TODO: index to delete could be undefined? */}\n            <Button\n              onClick={this.props.closeAndDelete(this.props.indexToDelete)}\n              color=\"primary\"\n            >\n              Delete\n            </Button>\n            <Button onClick={this.props.handleCloseDelete} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(SecretList);\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport InfoIcon from \"@material-ui/icons/Info\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Switch from \"@material-ui/core/Switch\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\n\nconst engUtils = require(\"./lib/enigma-utils\");\nconst styles = theme => ({\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    maxWidth: \"90%\"\n  },\n  dense: {\n    marginTop: 16\n  },\n  menu: {\n    width: 200\n  },\n  button: {\n    margin: theme.spacing.unit\n  }\n});\n\nclass TestatorSecretView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      showDecryptedSecret: false\n    };\n    //this.handleCloseEdit = this.handleCloseEdit.bind(this);\n  }\n\n  handleClickOpen = () => {\n    this.setState({ open: true });\n  };\n\n  toggleSecret = () => {\n    this.setState(prevState => ({\n      showDecryptedSecret: !prevState.showDecryptedSecret\n    }));\n  };\n\n  displaySecret = secret => {\n    // Override if the secret is being interacted with\n    // TODO: make this behavior more clear.\n\n    // When editing, the secret has already been decrypted.\n    // When making a new secret, it needs to be edited as plaintext.\n    if (this.props.actionType === \"Edit\" || this.props.actionType === \"New\") {\n      return secret;\n    }\n\n    // when viewing, the secret must have been saved in an encrypted form, so it\n    // may need to be decrypted.\n    if (this.props.actionType === \"View\") {\n      if (this.state.showDecryptedSecret) {\n        return getDecryptedValueFromHex(secret, this.props.network);\n      } else {\n        return secret;\n      }\n    }\n  };\n\n  render() {\n    const longText = `\n                  The secret, which should already be encrypted for the beneficiary with PGP.\n              `;\n\n    const { classes } = this.props;\n\n    const actionType = this.props.actionType;\n    const shouldDisable = actionType === \"View\" || this.props.secretViewLoading;\n\n    let secret = {};\n\n    if (actionType === \"View\") {\n      secret = this.props.secretProp;\n    } else if (actionType === \"Edit\" || actionType === \"New\") {\n      secret = this.props.editableSecret;\n    }\n\n    const secretUndefinedView = (\n      <div style={{ padding: 20 }}>\n        <strong>\n          No secret selected. Please select an existing secret or add a new one.\n        </strong>\n      </div>\n    );\n\n    if ((secret === undefined || secret === {}) && actionType !== \"New\") {\n      return secretUndefinedView;\n    }\n\n    const blankName = secret[\"name\"] === undefined || secret[\"name\"] === \"\";\n\n    // Necessary because TextField doesn't update if value is undefined.\n    const toStr = key => {\n      return key === undefined ? \"\" : key;\n    };\n\n    // Necessary because TextField doesn't update if value is undefined.\n    const toStrOrZero = key => {\n      return key === undefined ? \"0\" : key;\n    };\n\n    const badAddress =\n      secret[\"beneficiary_addr\"] === undefined ||\n      secret[\"beneficiary_addr\"] === \"\" ||\n      !window.web3.utils.isAddress(secret[\"beneficiary_addr\"]);\n\n    return (\n      <div>\n        <div style={{ padding: 10, fontSize: \"150%\" }}>\n          {actionType + \" Secret\"}\n        </div>\n        <Divider />\n        <div>\n          <div>\n            <strong>{\"Secret name: \"}</strong>\n            <Tooltip\n              title={\n                \"Currently stored unencrypted for both testator and beneficiary.\"\n              }\n            >\n              <IconButton aria-label=\"Info\">\n                <InfoIcon />\n              </IconButton>\n            </Tooltip>\n            <div>\n              <TextField\n                id=\"outlined-multiline-static\"\n                className={classes.textField}\n                disabled={shouldDisable}\n                onChange={this.props.updateEditable(\"name\")}\n                value={toStr(secret[\"name\"])}\n                margin=\"normal\"\n                variant=\"outlined\"\n                helperText={blankName ? \"Error: Name cannot be blank\" : \"\"}\n                error={blankName}\n                fullWidth\n              />\n            </div>\n          </div>\n          <br />\n          <div>\n            <strong>{\"Notes for beneficiary: \"}</strong>\n            <Tooltip\n              title={\n                \"Will only be viewable by the beneficiary and the testator.\"\n              }\n            >\n              <IconButton aria-label=\"Info\">\n                <InfoIcon />\n              </IconButton>\n            </Tooltip>\n          </div>\n          <div>\n            <TextField\n              id=\"outlined-multiline-static\"\n              multiline\n              rows=\"4\"\n              onChange={this.props.updateEditable(\"beneficiary_notes\")}\n              value={toStr(secret[\"beneficiary_notes\"])}\n              className={classes.textField}\n              disabled={shouldDisable}\n              margin=\"normal\"\n              variant=\"outlined\"\n              fullWidth\n            />\n          </div>\n          <div>\n            <strong>{\"Time Delay: \"}</strong>\n            <Tooltip\n              title={\n                \"A fixed amount of time from the last check in, before the secret can be viewed by the beneficiary.\"\n              }\n            >\n              <IconButton aria-label=\"Info\">\n                <InfoIcon />\n              </IconButton>\n            </Tooltip>\n          </div>\n          <div style={{ paddingBottom: \"10px\" }}>\n            {[\"days\", \"hours\", \"minutes\", \"seconds\"].map(input => {\n              return (\n                <Fragment key={input}>\n                  <TextField\n                    id=\"outlined-multiline-static\"\n                    value={toStrOrZero(secret.timeBeforeReveal[input])}\n                    onChange={this.props.updateTimeEditable(\n                      \"timeBeforeReveal\",\n                      input\n                    )}\n                    className={classes.textField}\n                    disabled={shouldDisable}\n                    margin=\"normal\"\n                    label={input}\n                    style={{ width: 100 }}\n                    type={\"number\"}\n                    inputProps={{\n                      maxLength: 2\n                    }}\n                  />\n                </Fragment>\n              );\n            })}\n          </div>\n          <div>\n            <Tooltip title={longText}>\n              <strong>{\"Secret: \"}</strong>\n            </Tooltip>\n            {actionType === \"View\" && (\n              <FormControlLabel\n                style={{ paddingLeft: 10 }}\n                control={\n                  <Switch\n                    checked={this.state.showDecryptedSecret}\n                    onChange={this.toggleSecret}\n                    value=\"checkedB\"\n                    color=\"primary\"\n                  />\n                }\n                label={\n                  <Tooltip\n                    title={\"Toggle to show decrypted secret (not recommended)\"}\n                  >\n                    <IconButton aria-label=\"Info\">\n                      <InfoIcon />\n                    </IconButton>\n                  </Tooltip>\n                }\n              />\n            )}\n          </div>\n          <div style={{ padding: 10 }}>\n            <TextField\n              id=\"outlined-multiline-static\"\n              multiline\n              rows=\"4\"\n              value={this.displaySecret(toStr(secret.secret))}\n              onChange={this.props.updateEditable(\"secret\")}\n              className={classes.textField}\n              disabled={shouldDisable}\n              margin=\"normal\"\n              variant=\"outlined\"\n              fullWidth\n            />\n          </div>\n          <div>\n            <strong>{\"Beneficiary ETH address: \"}</strong>\n            <Tooltip\n              title={\n                \"Will be used to identify the beneficiary, make sure this is correct.\"\n              }\n            >\n              <IconButton aria-label=\"Info\">\n                <InfoIcon />\n              </IconButton>\n            </Tooltip>\n            <div>\n              <TextField\n                id=\"outlined-multiline-static\"\n                value={toStr(secret.beneficiary_addr)}\n                onChange={this.props.updateEditable(\"beneficiary_addr\")}\n                className={classes.textField}\n                disabled={shouldDisable}\n                helperText={badAddress ? \"Error: Address is not valid\" : \"\"}\n                error={badAddress}\n                margin=\"normal\"\n                variant=\"outlined\"\n                fullWidth\n              />\n            </div>\n          </div>\n          <Divider />\n        </div>\n        {actionType !== \"View\" ? (\n          <div>\n            <Button\n              onClick={this.props.handleSave}\n              className={classes.button}\n              color=\"primary\"\n              variant={\"contained\"}\n              disabled={blankName || this.props.secretViewLoading}\n            >\n              Save\n            </Button>\n            <Button\n              className={classes.button}\n              onClick={this.props.handleCancel}\n              color=\"primary\"\n              variant={\"contained\"}\n              disabled={this.props.secretViewLoading}\n            >\n              Cancel\n            </Button>\n          </div>\n        ) : (\n          <div />\n        )}\n      </div>\n    );\n  }\n}\n\nTestatorSecretView.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\n// Function to encrypt values (in this case either address or net worth)\nfunction getEncryptedValue(value) {\n  let clientPrivKey =\n    \"853ee410aa4e7840ca8948b8a2f67e9a1c2f4988ff5f4ec7794edf57be421ae5\";\n  let enclavePubKey =\n    \"0061d93b5412c0c99c3c7867db13c4e13e51292bd52565d002ecf845bb0cfd8adfa5459173364ea8aff3fe24054cca88581f6c3c5e928097b9d4d47fce12ae47\";\n  let derivedKey = engUtils.getDerivedKey(enclavePubKey, clientPrivKey);\n  let encrypted = engUtils.encryptMessage(derivedKey, value);\n\n  return encrypted;\n}\n\n// TODO: this is hacky and hidden.\nfunction getDecryptedValueFromHex(value, network) {\n  let ascii = value;\n  if (network === \"ropsten\") {\n    ascii = window.web3.utils.toAscii(value);\n  }\n  return getDecryptedValue(ascii);\n}\n\n// Function to encrypt values (in this case either address or net worth)\nfunction getDecryptedValue(value) {\n  let clientPrivKey =\n    \"853ee410aa4e7840ca8948b8a2f67e9a1c2f4988ff5f4ec7794edf57be421ae5\";\n  let enclavePubKey =\n    \"0061d93b5412c0c99c3c7867db13c4e13e51292bd52565d002ecf845bb0cfd8adfa5459173364ea8aff3fe24054cca88581f6c3c5e928097b9d4d47fce12ae47\";\n  let derivedKey = engUtils.getDerivedKey(enclavePubKey, clientPrivKey);\n  let decrypted = engUtils.decryptMessage(derivedKey, value);\n\n  return decrypted;\n}\n\nexport default withStyles(styles)(TestatorSecretView);\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Menu from \"@material-ui/core/Menu\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport Divider from \"@material-ui/core/Divider/Divider\";\nimport ListSubheader from \"@material-ui/core/ListSubheader/ListSubheader\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport MediaQuery from \"react-responsive\";\nimport Toolbar from \"@material-ui/core/Toolbar/Toolbar\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Slide from \"@material-ui/core/Slide\";\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1\n  },\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  }\n});\n\nfunction shortAddr(addr) {\n  return addr.substring(0, 8);\n}\n\nclass CustomMenuItem extends React.Component {\n  render() {\n    return (\n      <Fragment>\n        <Button\n          aria-owns={\n            this.props.menuOpen === this.props.menuName\n              ? this.props.menuName\n              : undefined\n          }\n          aria-haspopup=\"true\"\n          onClick={this.props.handleMenu(this.props.menuName)}\n          color=\"inherit\"\n        >\n          {this.props.renderSelected()}\n        </Button>\n        <Popper\n          open={this.props.menuOpen === this.props.menuName}\n          anchorEl={this.props.anchorEl}\n          transition\n          disablePortal\n        >\n          {({ TransitionProps, placement }) => (\n            <Grow\n              {...TransitionProps}\n              id={this.props.menuName}\n              style={{\n                transformOrigin:\n                  placement === \"bottom\" ? \"center top\" : \"center bottom\"\n              }}\n            >\n              <Paper>\n                <ClickAwayListener onClickAway={this.props.handleClose}>\n                  {this.props.renderMenuList}\n                </ClickAwayListener>\n              </Paper>\n            </Grow>\n          )}\n        </Popper>\n      </Fragment>\n    );\n  }\n}\n\nclass CustomMenu extends React.Component {\n  state = {\n    anchorEl: null,\n    menuOpen: null,\n    menuOpenMobile: null,\n    viewDialogOpen: { \"dialog-account\": false, \"dialog-contract\": false }\n  };\n\n  renderMenuList = (menuName, menuItems, renderFunc) => {\n    return (\n      <React.Fragment>\n        <MenuList>\n          {menuItems.map((item, index) => (\n            <MenuItem\n              key={index}\n              onClick={this.handleMenuItemClick(menuName, index)}\n              selected={index === this.props.currMenuIndices[menuName]}\n            >\n              {renderFunc(item)}\n            </MenuItem>\n          ))}\n        </MenuList>\n      </React.Fragment>\n    );\n  };\n\n  renderListedAccount = account => {\n    return account[\"Type\"] + \":\" + account[\"Address\"] + \"...\";\n  };\n\n  renderListedContract = contract => {\n    return contract.name + \":\" + contract.address;\n  };\n\n  renderListedRole = role => {\n    return role;\n  };\n\n  renderSelectedContract = () => {\n    const index = this.props.currMenuIndices[\"contract\"];\n    let val = this.props.allContracts[index];\n    return (\n      val.prefix +\n      \" Contract: \" +\n      val.name +\n      \" (\" +\n      shortAddr(val.address) +\n      \"...)\"\n    );\n  };\n\n  renderSelectedRole = () => {\n    const index = this.props.currMenuIndices[\"role\"];\n    let val = this.props.allRoles[index];\n    return \"Role: \" + val;\n  };\n\n  renderSelectedAccount = () => {\n    let val =\n      this.props.allAccounts === undefined\n        ? [{ Type: \"None\", Address: \"None\" }]\n        : this.props.allAccounts;\n    const index = this.props.currMenuIndices[\"account\"];\n    return (\n      \"Account: \" +\n      val[index][\"Type\"] +\n      \" (\" +\n      shortAddr(val[index][\"Address\"]) +\n      \"...)\"\n    );\n  };\n\n  handleMenuItemClick = (menuName, index) => () => {\n    // TODO: is there a better way to pass props up if I want them at each level?\n    this.props.setCurrMenuIndex(menuName)(index);\n    this.handleClose();\n  };\n\n  handleMenu = menuName => event => {\n    this.setState({ menuOpen: menuName, anchorEl: event.currentTarget });\n  };\n\n  handleMenuMobile = event => {\n    this.setState({ menuOpenMobile: true, anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({ anchorEl: null, menuOpen: null });\n  };\n\n  handleCloseMobile = () => {\n    this.setState({ anchorEl: null, menuOpenMobile: null });\n  };\n\n  handleCloseViewDialog = kind => event => {\n    let viewDialogOpenC = JSON.parse(JSON.stringify(this.state.viewDialogOpen));\n    viewDialogOpenC[kind] = false;\n    this.setState({\n      viewDialogOpen: viewDialogOpenC\n    });\n  };\n\n  handleOpenViewDialog = kind => event => {\n    let viewDialogOpenC = JSON.parse(JSON.stringify(this.state.viewDialogOpen));\n    viewDialogOpenC[kind] = true;\n    this.setState({\n      anchorEl: null,\n      menuOpenMobile: null,\n      viewDialogOpen: viewDialogOpenC\n    });\n  };\n\n  render() {\n    const { anchorEl } = this.state;\n\n    // const displayAccounts = (selected)\n    const contracts = this.props.allContracts;\n\n    const { allAccounts } = this.props;\n    let accounts =\n      allAccounts !== undefined\n        ? allAccounts\n        : [{ Type: \"None\", Address: \"None\" }];\n\n    const roles = this.props.allRoles;\n\n    const renderMenuItemsMobile = () => {\n      let roleMenuId = \"menu-role\";\n      let roleMenuName = \"role\";\n\n      // TODO: Fix the hack here for the dialog info, we're only using the first element\n      // for the contract and account\n      return (\n        <React.Fragment>\n          <Button onClick={this.handleMenuMobile}>\n            <MenuIcon />\n          </Button>\n          <Popper\n            open={this.state.menuOpenMobile != null}\n            anchorEl={anchorEl}\n            transition\n            disablePortal\n            placement={\"top-end\"}\n          >\n            {({ TransitionProps, placement }) => (\n              <Grow\n                {...TransitionProps}\n                id={roleMenuId}\n                style={{\n                  transformOrigin:\n                    placement === \"bottom\" ? \"center top\" : \"center bottom\"\n                }}\n              >\n                <Paper>\n                  <ClickAwayListener onClickAway={this.handleCloseMobile}>\n                    <React.Fragment>\n                      <MenuList>\n                        <MenuItem\n                          onClick={this.handleOpenViewDialog(\"dialog-account\")}\n                        >\n                          View Account\n                        </MenuItem>\n                        <MenuItem\n                          onClick={this.handleOpenViewDialog(\"dialog-contract\")}\n                        >\n                          View Contract\n                        </MenuItem>\n                      </MenuList>\n                      <Divider />\n                      <ListSubheader>Role</ListSubheader>\n                      <MenuList>\n                        {this.props.allRoles.map((item, index) => (\n                          <MenuItem\n                            key={index}\n                            onClick={this.handleMenuItemClick(\n                              roleMenuName,\n                              index\n                            )}\n                            selected={\n                              index === this.props.currMenuIndices[\"role\"]\n                            }\n                          >\n                            {item}\n                          </MenuItem>\n                        ))}\n                      </MenuList>\n                    </React.Fragment>\n                  </ClickAwayListener>\n                </Paper>\n              </Grow>\n            )}\n          </Popper>\n          <ViewInfoDialog\n            viewDialogOpen={this.state.viewDialogOpen[\"dialog-account\"]}\n            handleCloseViewDialog={this.handleCloseViewDialog(\"dialog-account\")}\n            title={\"Account Info\"}\n            body={\n              <div>\n                Type: {allAccounts[0].Type}\n                <br />\n                Address: {allAccounts[0].Address}\n              </div>\n            }\n          />\n          <ViewInfoDialog\n            viewDialogOpen={this.state.viewDialogOpen[\"dialog-contract\"]}\n            handleCloseViewDialog={this.handleCloseViewDialog(\n              \"dialog-contract\"\n            )}\n            title={\"Contract Info\"}\n            body={\n              <div>\n                Type: {contracts[0].prefix}\n                <br />\n                Name: {contracts[0].name}\n                <br />\n                Address: {contracts[0].address}\n              </div>\n            }\n          />\n        </React.Fragment>\n      );\n    };\n\n    const renderMenuItems = () => {\n      return (\n        <Fragment>\n          <CustomMenuItem\n            anchorEl={this.state.anchorEl}\n            menuOpen={this.state.menuOpen}\n            menuName={\"menu-contract\"}\n            handleMenu={this.handleMenu}\n            renderSelected={this.renderSelectedContract}\n            handleClose={this.handleClose}\n            currAccountIndex={this.props.currMenuIndices[\"contract\"]}\n            renderMenuList={this.renderMenuList(\n              \"contract\",\n              contracts,\n              this.renderListedContract\n            )}\n          />\n          <CustomMenuItem\n            anchorEl={this.state.anchorEl}\n            menuOpen={this.state.menuOpen}\n            menuName={\"menu-account\"}\n            handleMenu={this.handleMenu}\n            renderSelected={this.renderSelectedAccount}\n            handleClose={this.handleClose}\n            currAccountIndex={this.props.currMenuIndices[\"account\"]}\n            renderMenuList={this.renderMenuList(\n              \"account\",\n              accounts,\n              this.renderListedAccount\n            )}\n          />\n          <CustomMenuItem\n            anchorEl={this.state.anchorEl}\n            menuOpen={this.state.menuOpen}\n            menuName={\"menu-role\"}\n            handleMenu={this.handleMenu}\n            renderSelected={this.renderSelectedRole}\n            handleClose={this.handleClose}\n            currAccountIndex={this.props.currMenuIndices[\"role\"]}\n            renderMenuList={this.renderMenuList(\n              \"role\",\n              roles,\n              this.renderListedRole\n            )}\n          />\n        </Fragment>\n      );\n    };\n\n    return (\n      <React.Fragment>\n        <MediaQuery query=\"(max-width: 1224px), (max-device-width: 1224px)\">\n          {renderMenuItemsMobile()}\n        </MediaQuery>\n        <MediaQuery query=\"(min-device-width: 1224px) and (min-width: 1224px)\">\n          {renderMenuItems()}\n        </MediaQuery>\n      </React.Fragment>\n    );\n  }\n}\n\nfunction Transition(props) {\n  return <Slide direction=\"up\" {...props} />;\n}\n\n// Only one of these should be open at a time\n// (for viewing the contract or account information).\nclass ViewInfoDialog extends React.Component {\n  render() {\n    return (\n      <Fragment>\n        <Dialog\n          open={this.props.viewDialogOpen}\n          TransitionComponent={Transition}\n          keepMounted\n          onClose={this.props.handleCloseViewDialog}\n          aria-labelledby=\"view-dialog-slide-title\"\n          aria-describedby=\"view-dialog-slide-description\"\n        >\n          <DialogTitle id=\"view-dialog-slide-title\">\n            {this.props.title}\n          </DialogTitle>\n          <Divider />\n          <DialogContent>{this.props.body}</DialogContent>\n          <DialogActions>\n            <Button onClick={this.props.handleCloseViewDialog} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </Fragment>\n    );\n  }\n}\n\nCustomMenu.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(CustomMenu);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport LockOpenIcon from \"@material-ui/icons/LockOpen\";\nimport CustomMenu from \"./CustomMenu\";\nimport { Link } from \"react-router-dom\";\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1\n  },\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  },\n  icon: {\n    marginRight: theme.spacing.unit * 2\n  }\n});\n\nclass CustomAppBar extends React.Component {\n  state = {\n    anchorEl: null,\n    menuOpen: null,\n    currRole: \"Beneficiary\",\n    currAccount: { Type: \"Ledger\", Address: \"0x123456\" },\n    currContract: { Type: \"Simple\", Address: \"0x132435\" }\n  };\n\n  handleMenu = menuName => event => {\n    this.setState({ menuOpen: menuName, anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({ anchorEl: null, menuOpen: null });\n  };\n\n  renderCustomMenu = () => {\n    if (this.props.setupComplete === true) {\n      return (\n        <div>\n          <CustomMenu\n            allAccounts={this.props.allAccounts}\n            allContracts={this.props.allContracts}\n            allRoles={this.props.allRoles}\n            currMenuIndices={this.props.currMenuIndices}\n            setCurrMenuIndex={this.props.setCurrMenuIndex}\n          />\n        </div>\n      );\n    } else {\n      return <div />;\n    }\n  };\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <AppBar position=\"relative\">\n        <Toolbar>\n          <LockOpenIcon className={classes.icon} />\n\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\n            <Link to={\"/\"} style={{ color: \"inherit\", textDecoration: \"none\" }}>\n              SecretKeeper{\" \"}\n            </Link>\n          </Typography>\n          {this.renderCustomMenu()}\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nCustomAppBar.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(CustomAppBar);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport MediaQuery from \"react-responsive\";\n\n// https://github.com/mui-org/material-ui/blob/master/docs/src/pages/getting-started/page-layout-examples/checkout/Checkout.js\nconst styles = theme => ({\n  appBar: {\n    position: \"relative\"\n  },\n  layout: {\n    width: \"auto\",\n    marginLeft: theme.spacing.unit * 2,\n    marginRight: theme.spacing.unit * 2,\n    [theme.breakpoints.up(600 + theme.spacing.unit * 2 * 2)]: {\n      width: 600,\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    }\n  },\n  paper: {\n    marginTop: theme.spacing.unit * 3,\n    marginBottom: theme.spacing.unit * 3,\n    padding: theme.spacing.unit * 2,\n    [theme.breakpoints.up(600 + theme.spacing.unit * 3 * 2)]: {\n      marginTop: theme.spacing.unit * 3,\n      marginBottom: theme.spacing.unit * 3,\n      padding: theme.spacing.unit * 3\n    }\n  },\n  heroButtons: {\n    marginTop: theme.spacing.unit * 4\n  },\n  buttons: {\n    display: \"flex\",\n    justifyContent: \"flex-end\"\n  },\n  button: {\n    marginTop: theme.spacing.unit * 3,\n    marginLeft: theme.spacing.unit\n  }\n});\n\nclass AppSetup extends React.Component {\n  state = {};\n\n  isSetupComplete = () => {\n    return (\n      this.props.metamaskInstalled &&\n      this.props.metamaskUnlocked &&\n      [\"ropsten\", \"private\"].includes(this.props.network) &&\n      this.props.disclaimerChecked\n    );\n  };\n\n  render() {\n    const { classes } = this.props;\n    var secondary = true;\n    return (\n      <React.Fragment>\n        <CssBaseline />\n        <main className={classes.layout}>\n          <Paper className={classes.paper}>\n            <Typography component=\"h1\" variant=\"h4\" align=\"center\">\n              Get started with SecretKeeper\n            </Typography>\n            <br />\n            <Typography component=\"h1\" variant=\"h6\" align=\"center\">\n              Please complete all the steps below to start using the app.\n            </Typography>\n            <List dense={false}>\n              <ListItem>\n                <ListItemText\n                  primary=\"Set up Metamask\"\n                  secondary={\n                    <React.Fragment>\n                      You can go{\" \"}\n                      <a href=\"https://metamask.io/\" target=\"_blank\">\n                        here\n                      </a>{\" \"}\n                      to install Metamask. Once it's installed, set up an\n                      account.\n                      <MediaQuery query=\"(max-device-width: 1224px)\">\n                        <br />\n                        For mobile devices, Metamask is only supported on the\n                        Firefox browser.\n                      </MediaQuery>\n                    </React.Fragment>\n                  }\n                />\n                <ListItemIcon>\n                  <Checkbox\n                    checked={this.props.metamaskInstalled}\n                    disabled={true}\n                  />\n                </ListItemIcon>\n              </ListItem>\n              <ListItem>\n                <ListItemText\n                  primary={\"Allow SecretKeeper to use Metamask\"}\n                  secondary={\n                    <React.Fragment>\n                      After signing in to Metamask, use the Metamask\n                      notification window to authorize SecretKeeper.\n                      <MediaQuery query=\"(max-device-width: 1224px)\">\n                        <br />\n                        For mobile devices, open the Metamask extension in a new\n                        tab if it doesn't appear automatically.\n                      </MediaQuery>\n                    </React.Fragment>\n                  }\n                />\n                <ListItemIcon>\n                  <Checkbox\n                    checked={this.props.metamaskUnlocked}\n                    disabled={true}\n                  />\n                </ListItemIcon>{\" \"}\n              </ListItem>\n              <ListItem>\n                <ListItemText\n                  primary={\"Connect to a testnet with Metamask\"}\n                  secondary={\n                    <React.Fragment>\n                      SecretKeeper currently provides two completely separate\n                      implementations that don't share data with each other.\n                      <br />\n                      Use the Ropsten testnet to interact with the Enigma\n                      contract.\n                      <br />\n                      Alternatively, follow{\" \"}\n                      <a\n                        href=\"https://docs.oasiscloud.io/en/latest/quickstart-guide/\"\n                        target=\"_blank\"\n                      >\n                        this guide\n                      </a>{\" \"}\n                      to interact with the Oasis contract.\n                      <br />\n                      <br />\n                      <strong>Detected network:</strong> {this.props.network}\n                    </React.Fragment>\n                  }\n                />\n\n                <ListItemIcon>\n                  {/* // TODO: display the current network */}\n                  <Checkbox\n                    checked={[\"ropsten\", \"private\"].includes(\n                      this.props.network\n                    )}\n                    disabled={true}\n                  />\n                </ListItemIcon>\n              </ListItem>\n              <ListItem>\n                <ListItemText\n                  primary=\"Accept the disclaimer\"\n                  secondary={\n                    \"By checking this box, you agree to all of the terms in the disclaimer below.\"\n                  }\n                />\n                <ListItemIcon>\n                  <Checkbox\n                    onClick={this.props.handleCheckDisclaimer}\n                    checked={this.props.disclaimerChecked}\n                  />\n                </ListItemIcon>\n              </ListItem>\n            </List>\n            <div className={classes.heroButtons}>\n              <Grid container spacing={16} justify=\"center\">\n                <Grid item>\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={!this.isSetupComplete()}\n                    onClick={this.props.handleLaunch}\n                  >\n                    Launch\n                  </Button>\n                </Grid>\n                <Grid item>\n                  <Button\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    onClick={this.props.handleReload}\n                  >\n                    Reload\n                  </Button>\n                </Grid>\n              </Grid>\n            </div>\n          </Paper>\n          <Paper className={classes.paper}>\n            <Typography component=\"h1\" variant=\"h4\" align=\"center\">\n              Disclaimer\n            </Typography>\n            <br />\n            <Typography component=\"h4\" variant=\"body1\" align=\"center\">\n              The SecretKeeper decentralized application and related components\n              (hereinafter, the dApp') is an Alpha release that will contain\n              bugs. By using the dApp, users acknowledge this and accept that\n              SecretKeeper and its developers do not take any responsibility for\n              lost funds, exposure of private information, or any other kind of\n              direct or indirect damages or loss.\n              <br />\n              Some technical skills and knowledge are required to use the dApp,\n              and first time users should read the FAQ and guide to understand\n              the usage thoroughly.\n              <br />\n              Users are advised to be careful with their private information and\n              when interacting or storing data in a public network, for their\n              own safety. Users acknowledge that their interactions with the app\n              are not anonymous and they may currently be tracked by third\n              parties.\n              <br />\n              Any of the dApp policies, content, information, promotions,\n              disclosures, disclaimers and features (hereinafter,  dApp\n              content) may be revised, modified, updated, and/or supplemented\n              at any time, and without prior notice, at the sole and absolute\n              discretion of the apps developers. All dApp content is subject to\n              change at any time, without advance notice provided to users.{\" \"}\n            </Typography>\n          </Paper>\n        </main>\n      </React.Fragment>\n    );\n  }\n}\n\nAppSetup.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(AppSetup);\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport InfoIcon from \"@material-ui/icons/Info\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport TextField from \"@material-ui/core/TextField\";\n\nconst engUtils = require(\"./lib/enigma-utils\");\nconst styles = theme => ({\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit\n  },\n  dense: {\n    marginTop: 16\n  },\n  menu: {\n    width: 200\n  },\n  button: {\n    margin: theme.spacing.unit\n  }\n});\n\nclass BeneficiarySecretView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false\n    };\n  }\n\n  handleClickOpen = () => {\n    this.setState({ open: true });\n  };\n\n  canDecryptSecret = () => {\n    let result;\n    // TODO: another hacky fix\n    if (this.props.network === \"ropsten\") {\n      result =\n        parseInt(this.props.secretProp.lastCheckIn, 16) * 1000 +\n          this.props.convertJSONToMS(this.props.secretProp.timeBeforeReveal) <=\n        this.props.currTs * 1000;\n    } else {\n      result =\n        parseInt(this.props.secretProp.lastCheckIn * 1000) +\n          this.props.convertJSONToMS(this.props.secretProp.timeBeforeReveal) <=\n        this.props.currTs * 1000;\n    }\n    return result;\n  };\n\n  render() {\n    const longText = `\n                  The secret, which should already be encrypted for the beneficiary with PGP.\n              `;\n\n    const { classes } = this.props;\n\n    const actionType = this.props.actionType;\n    const shouldDisable = true;\n\n    let secret = {};\n\n    secret = this.props.secretProp;\n\n    const secretUndefinedView = (\n      <div style={{ padding: 20 }}>\n        <strong>No secret selected. Please select an existing secret.</strong>\n      </div>\n    );\n\n    if (secret === undefined || secret === {}) {\n      return secretUndefinedView;\n    }\n\n    const blankName = secret[\"name\"] === undefined || secret[\"name\"] === \"\";\n\n    // Necessary because TextField doesn't update if value is undefined.\n    const toStr = key => {\n      return key === undefined ? \"\" : key;\n    };\n\n    // Necessary because TextField doesn't update if value is undefined.\n    const toStrOrZero = key => {\n      return key === undefined ? \"0\" : key;\n    };\n\n    const tsToString = ts => {\n      // TODO: why do I have to use radix 16 here but not in check in panel?\n      // TODO: this is another hacky fix\n      let result;\n      if (this.props.network === \"ropsten\") {\n        result = new Date(parseInt(ts, 16) * 1000);\n      } else {\n        result = new Date(ts * 1000);\n      }\n      return result.toLocaleString();\n    };\n\n    return (\n      <div>\n        <div style={{ padding: 10, fontSize: \"150%\" }}>\n          {actionType + \" Secret\"}\n        </div>\n        <Divider />\n        <div>\n          <div>\n            <strong>{\"Secret name: \"}</strong>\n            <Tooltip\n              title={\n                \"Currently stored unencrypted for both testator and beneficiary.\"\n              }\n            >\n              <IconButton aria-label=\"Info\">\n                <InfoIcon />\n              </IconButton>\n            </Tooltip>\n            <div>\n              <TextField\n                id=\"outlined-multiline-static\"\n                className={classes.textField}\n                disabled={shouldDisable}\n                value={toStr(secret[\"name\"])}\n                margin=\"normal\"\n                variant=\"outlined\"\n                helperText={blankName ? \"Error: Name cannot be blank\" : \"\"}\n                error={blankName}\n              />\n            </div>\n          </div>\n          <br />\n          <div>\n            <strong>{\"Notes for beneficiary: \"}</strong>\n            <Tooltip title={\"Currently public.\"}>\n              <IconButton aria-label=\"Info\">\n                <InfoIcon />\n              </IconButton>\n            </Tooltip>\n          </div>\n          <div>\n            <TextField\n              id=\"outlined-multiline-static\"\n              multiline\n              rows=\"4\"\n              value={toStr(secret[\"beneficiary_notes\"])}\n              className={classes.textField}\n              disabled={shouldDisable}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n          </div>\n          <div>\n            <strong>{\"Time Delay: \"}</strong>\n            <Tooltip\n              title={\n                \"A fixed amount of time from the last check in, before the secret can be viewed by the beneficiary. Currently public.\"\n              }\n            >\n              <IconButton aria-label=\"Info\">\n                <InfoIcon />\n              </IconButton>\n            </Tooltip>\n          </div>\n          <div>\n            {[\"days\", \"hours\", \"minutes\", \"seconds\"].map(input => {\n              return (\n                <Fragment key={input}>\n                  <TextField\n                    id=\"outlined-multiline-static\"\n                    value={toStrOrZero(secret.timeBeforeReveal[input])}\n                    className={classes.textField}\n                    disabled={shouldDisable}\n                    margin=\"normal\"\n                    label={input}\n                    style={{ width: 100 }}\n                    type={\"number\"}\n                    inputProps={{\n                      maxLength: 2\n                    }}\n                  />\n                </Fragment>\n              );\n            })}\n          </div>\n          <div>\n            <strong>{\"Last Check In: \"}</strong>\n            <Tooltip title={\"The last time the testator checked in.\"}>\n              <IconButton aria-label=\"Info\">\n                <InfoIcon />\n              </IconButton>\n            </Tooltip>\n          </div>\n          <div>\n            <TextField\n              id=\"outlined-multiline-static\"\n              value={tsToString(secret.lastCheckIn)}\n              className={classes.textField}\n              disabled={true}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n          </div>\n          <div>\n            <Tooltip title={longText}>\n              <strong>{\"Encrypted Secret: \"}</strong>\n            </Tooltip>\n          </div>\n          <div style={{ padding: 10 }}>\n            <TextField\n              id=\"outlined-multiline-static\"\n              multiline\n              rows=\"4\"\n              value={toStr(secret.secret)}\n              className={classes.textField}\n              disabled={shouldDisable}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n          </div>\n          <div>\n            <strong>{\"Testator ETH address: \"}</strong>\n            <Tooltip title={\"The secret owner's address.\"}>\n              <IconButton aria-label=\"Info\">\n                <InfoIcon />\n              </IconButton>\n            </Tooltip>\n            <div>\n              <TextField\n                id=\"outlined-multiline-static\"\n                value={toStr(secret.owner_addr)}\n                className={classes.textField}\n                disabled={shouldDisable}\n                margin=\"normal\"\n                variant=\"outlined\"\n              />\n            </div>\n          </div>\n          <Divider />\n        </div>\n        <div>\n          <Button\n            onClick={this.props.decryptSecret}\n            className={classes.button}\n            color=\"primary\"\n            variant={\"contained\"}\n            disabled={!this.canDecryptSecret()}\n          >\n            Decrypt Secret\n          </Button>\n        </div>\n        <div>\n          <div style={{ padding: \"10px\" }}>\n            This functionality simulates locking and unlocking the secret, since\n            Enigma is not yet live to decrypt the secret.\n            {!this.canDecryptSecret()\n              ? \" The time delay has not yet passed from the last check in.\"\n              : \" The time delay has passed and the secret can now be decrypted.\"}\n          </div>\n          {this.props.decryptedSecret === undefined ? (\n            \"\"\n          ) : (\n            // TODO: store the secret encrypted in memory?\n            <div>\n              <strong>Decrypted Secret:</strong>\n              <div style={{ padding: 10 }}>\n                <TextField\n                  id=\"outlined-multiline-static\"\n                  multiline\n                  rows=\"4\"\n                  value={this.props.decryptedSecret}\n                  className={classes.textField}\n                  disabled={shouldDisable}\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                />\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\n// Function to encrypt values (in this case either address or net worth)\nfunction getEncryptedValue(value) {\n  let clientPrivKey =\n    \"853ee410aa4e7840ca8948b8a2f67e9a1c2f4988ff5f4ec7794edf57be421ae5\";\n  let enclavePubKey =\n    \"0061d93b5412c0c99c3c7867db13c4e13e51292bd52565d002ecf845bb0cfd8adfa5459173364ea8aff3fe24054cca88581f6c3c5e928097b9d4d47fce12ae47\";\n  let derivedKey = engUtils.getDerivedKey(enclavePubKey, clientPrivKey);\n  let encrypted = engUtils.encryptMessage(derivedKey, value);\n\n  return encrypted;\n}\n\nBeneficiarySecretView.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(BeneficiarySecretView);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Paper from \"@material-ui/core/Paper\";\nimport SecretList from \"./SecretList\";\nimport TestatorSecretView from \"./TestatorSecretView\";\nimport { HashRouter as Router } from \"react-router-dom\";\nimport CustomAppBar from \"./CustomAppBar\";\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\nimport Web3 from \"web3\";\nimport IconButton from \"@material-ui/core/IconButton/IconButton\";\nimport ReactGA from \"react-ga\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport secretKeeperContractDefinition from \"./contracts/SecretKeeper.json\";\nimport { MuiThemeProvider } from \"@material-ui/core/styles\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport createPalette from \"@material-ui/core/styles/createPalette\";\nimport CssBaseline from \"@material-ui/core/es/CssBaseline/CssBaseline\";\nimport AppSetup from \"./AppSetup\";\nimport BeneficiarySecretView from \"./BeneficiarySecretView\";\nimport BeneficiarySecretList from \"./BeneficiarySecretList\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\n\n// Hardcoded for now\nimport oasisSecretKeeperContractDefinition from \"./contracts/OasisSecretKeeper.json\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MediaQuery from \"react-responsive\";\n\nconst engUtils = require(\"./lib/enigma-utils\");\nvar contract = require(\"truffle-contract\");\n\nconst GAS = \"600000\";\nconst OASIS_DEVNET = 42261;\nconst ROPSTEN = \"3\";\n\nconst Web3c = require(\"web3c\");\n\nconst theme = createMuiTheme({\n  palette: createPalette({\n    primary: {\n      light: \"#757ce8\",\n      main: \"#3c9eb5\",\n      dark: \"#506184\",\n      contrastText: \"#fff\"\n    },\n    secondary: {\n      light: \"#ff7961\",\n      main: \"#f44336\",\n      dark: \"#ba000d\",\n      contrastText: \"#000\"\n    }\n  }),\n  typography: {\n    useNextVariants: true\n  }\n});\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1\n  },\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  },\n  button: {\n    margin: theme.spacing.unit * 2\n  },\n  progress: {\n    margin: theme.spacing.unit * 2\n  }\n});\n\nvar web3c;\nvar OasisSecretKeeperContract;\n\nclass MainApp extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  isMetamaskInstalled() {\n    if (typeof web3 !== \"undefined\" && window.web3.currentProvider.isMetaMask) {\n      console.log(\"METAMASK INSTALLED!\");\n      return true;\n    } else {\n      console.log(\"NOT INSTALLED\");\n      return false;\n    }\n  }\n\n  // TODO: fix bug in original where getNetwork() isn't a function:\n  // https://github.com/MetaMask/faq/blob/master/DEVELOPERS.md\n  // See https://github.com/ethereum/web3.js/issues/1353\n  // Also, apparently this isn't a completely accurate method:\n  // https://web3js.readthedocs.io/en/1.0/web3-eth-net.html#getnetworktype\n  async logNetworkModern() {\n    let err,\n      network = await window.web3.eth.net.getNetworkType();\n    if (err !== undefined) {\n      console.log(JSON.stringify(err));\n    }\n    this.setState({\n      network: network,\n      allContracts: this.getContractInfo(network)\n    });\n    return network;\n  }\n\n  // https://timestamp.online/article/how-to-convert-timestamp-to-datetime-in-javascript\n  async getCurrTimestamp() {\n    // TODO: just make this once.\n    const w3 = new Web3(\n      new Web3.providers.HttpProvider(\"https://ropsten.infura.io\")\n    );\n    let currBlock = await w3.eth.getBlock(\"latest\");\n    // TODO: throw a better error if currBlock.timestamp doesn't exist, currBlock can be null!\n    if (currBlock === null || currBlock.timestamp === undefined) {\n      console.log(\"couldn't get current block timestamp\");\n      return;\n    }\n    let ts = new Date(currBlock.timestamp * 1000);\n    this.setState({\n      currTimestamp: ts.toLocaleString(),\n      currTs: currBlock.timestamp\n    });\n  }\n\n  // https://timestamp.online/article/how-to-convert-timestamp-to-datetime-in-javascript\n  getCurrWeb3cTimestamp = async () => {\n    // TODO: just make this once.\n    const w3 = new Web3(\n      new Web3.providers.HttpProvider(\"https://ropsten.infura.io\")\n    );\n\n    web3c = new Web3c(\n      new Web3.providers.HttpProvider(\"https://ropsten.infura.io\"),\n      Web3\n    );\n\n    let currBlock = await web3c.eth.getBlock(\"latest\");\n\n    // TODO: throw a better error if currBlock.timestamp doesn't exist, currBlock can be null!\n    if (currBlock === null || currBlock.timestamp === undefined) {\n      console.log(\"couldn't get current block timestamp\");\n      return;\n    }\n    let ts = new Date(currBlock.timestamp * 1000);\n    this.setState({\n      currTimestamp: ts.toLocaleString(),\n      currTs: currBlock.timestamp\n    });\n  };\n\n  getLastCheckIn(account, msg) {\n    let result;\n    if (this.state.network === \"private\") {\n      result = OasisSecretKeeperContract.methods\n        .getLastCheckIn()\n        .call({ from: account.Address, gas: GAS });\n    } else if (this.state.network === \"ropsten\") {\n      result = this.state.secretKeeperContract.getLastCheckIn({\n        from: account.Address,\n        gas: GAS\n      });\n    }\n    result.then(result => {\n      console.log(\"Got last check in result: \" + JSON.stringify(result));\n      // TODO: error check here, of course.\n      let ts = new Date(parseInt(result) * 1000);\n      this.setState({\n        lastCheckIn: ts.toLocaleString(),\n        checkInLoading: false,\n        checkInErrMsg: msg\n      });\n    });\n  }\n\n  async doCheckIn() {\n    let account = this.state.allAccounts[0];\n    this.setState({ checkInLoading: true, checkInErrMsg: \"Checking in...\" });\n\n    let result;\n    if (this.state.network === \"private\") {\n      // TODO: switch this to use state.\n      result = OasisSecretKeeperContract.methods\n        .checkIn()\n        .send({ from: account.Address, gas: GAS });\n    } else if (this.state.network === \"ropsten\") {\n      result = this.state.secretKeeperContract.checkIn({\n        from: account.Address,\n        gas: GAS\n      });\n    }\n    result\n      .then(result => {\n        console.log(\"Got check in receipt: \" + JSON.stringify(result));\n        this.getLastCheckIn(account, \"Check in complete!\");\n      })\n      .catch(err => {\n        console.log(\"Error when checking in: \" + err.message);\n        this.setState({\n          checkInLoading: false,\n          checkInErrMsg: err.message\n        });\n      });\n  }\n\n  setWeb3AccountsIfMetamaskUnlocked = (err, accounts) => {\n    this.addAccounts(err, accounts);\n    this.registerRopstenContractInstance();\n\n    return true;\n  };\n\n  setWeb3cAccountsIfMetamaskUnlocked = (err, accounts) => {\n    this.addAccounts(err, accounts);\n    this.registerOasisContractInstance();\n\n    return true;\n  };\n\n  addAccounts = (err, accounts) => {\n    if (err != null) {\n      console.log(err);\n      return false;\n    } else if (accounts.length === 0) {\n      console.log(\"MetaMask is locked\");\n      return false;\n    } else {\n      console.log(\"MetaMask is unlocked: \" + accounts);\n      let allAccounts = [];\n      for (var i = 0; i < accounts.length; i++) {\n        // TODO: don't hard code Metamask as provider name.\n        allAccounts.push({ Type: \"Metamask\", Address: accounts[i] });\n      }\n      this.setState({\n        metamaskUnlocked: true,\n        allAccounts: allAccounts\n      });\n    }\n  };\n\n  // This will set the contract instance in the state, and automatically retrieve the last check in and secrets.\n  async registerRopstenContractInstance() {\n    // https://github.com/trufflesuite/truffle-contract#full-example\n    var contractAddr2 = secretKeeperContractDefinition.networks[\"3\"].address;\n    console.log(\"Using secret keeper contract address: \" + contractAddr2);\n    var instance2;\n    var SecretKeeper = contract(secretKeeperContractDefinition);\n    SecretKeeper.setProvider(window.web3.currentProvider);\n\n    // add snackbar for \"please complete metamask transaction\"?\n    // Could use deployed() as well.\n    // Get contract instance and last check in time.\n\n    SecretKeeper.at(contractAddr2)\n      .then(result => {\n        instance2 = result;\n\n        console.log(\"Instance addr: \" + instance2.address);\n        this.setState({ secretKeeperContract: instance2 });\n        this.getSecretsForTestator(instance2);\n        return instance2.getLastCheckIn({\n          from: this.state.allAccounts[0].Address,\n          gas: GAS\n        });\n      })\n      .then(result => {\n        console.log(\"Result for old last check in: \" + JSON.stringify(result));\n        let intTs = parseInt(result);\n        let ts = new Date(intTs * 1000);\n        this.setState({\n          lastCheckIn: intTs === 0 ? \"None\" : ts.toLocaleString()\n        });\n      })\n      .catch(err => {\n        console.log(\n          \"Error for getting initial secret and last check in (testator): \" +\n            JSON.stringify(err)\n        );\n        this.setState({ checkInErrMsg: err.message });\n      });\n  }\n\n  // This will set the contract instance in the state, and automatically retrieve the last check in and secrets.\n  // TODO: complete\n  async registerOasisContractInstance() {\n    console.log(\n      \"running check in at \",\n      oasisSecretKeeperContractDefinition.networks[OASIS_DEVNET]\n    );\n    OasisSecretKeeperContract = new web3c.oasis.Contract(\n      oasisSecretKeeperContractDefinition.abi,\n      oasisSecretKeeperContractDefinition.networks[OASIS_DEVNET].address,\n      {\n        from: this.state.allAccounts[0].Address\n      }\n    );\n\n    this.setState({ secretKeeperContract: OasisSecretKeeperContract });\n\n    // TODO: make call to get secrets for testator or beneificiary\n    this.getSecretsForTestatorOasis();\n\n    OasisSecretKeeperContract.methods\n      .getLastCheckIn()\n      .call()\n      .then(result => {\n        console.log(\n          \"Result for old last check in? : \" + JSON.stringify(result)\n        );\n        let intTs = parseInt(result);\n        let ts = new Date(intTs * 1000);\n        this.setState({\n          lastCheckIn: intTs === 0 ? \"None\" : ts.toLocaleString()\n        });\n      })\n      .catch(err => {\n        console.log(\n          \"Error for getting initial secret and last check in (testator): \" +\n            JSON.stringify(err)\n        );\n        this.setState({ checkInErrMsg: err.message });\n      });\n  }\n\n  async getSecretsForBeneficiaryOasis() {\n    const account = this.state.allAccounts[0];\n    let staticSecrets = [];\n    let numSecrets = 0;\n\n    // First get the number of secrets.\n    try {\n      numSecrets = await OasisSecretKeeperContract.methods\n        .getNumSecretsForBeneficiary()\n        .call({\n          from: account.Address,\n          gas: GAS\n        });\n    } catch (err) {\n      console.log(\n        \"Error for getting number of secrets from Oasis contract (beneficiary): \" +\n          err\n      );\n      this.setState({ checkInErrMsg: err.message });\n    }\n\n    // Set up calls to get information for each secret.\n    const genPromisesArr = () => {\n      let allPromises = [];\n      for (let i = 0; i < numSecrets; i++) {\n        allPromises.push(\n          OasisSecretKeeperContract.methods\n            .getSecretForBeneficiary(i)\n            .call({ from: account.Address, gas: GAS })\n        );\n      }\n      return allPromises;\n    };\n    let promises = genPromisesArr();\n    try {\n      await Promise.all(promises)\n        .then(response => {\n          for (let i = 0; i < numSecrets; i++) {\n            let result = response[i];\n            staticSecrets.push({\n              name: result.name,\n              testator_notes: \"NONE\",\n              beneficiary_notes: result.beneficiaryNote,\n              // TODO: it's confusing to convert timeBeforeReveal but not lastCheckIn\n              timeBeforeReveal: this.convertMS(result.timeBeforeReveal),\n              lastCheckIn: result.lastCheckIn,\n              secret: result.secret,\n              owner_addr: result.owner\n            });\n\n            this.setState({\n              secretViewErrMsg: \"Successfully retrieved secrets.\",\n              allSecrets: staticSecrets\n            });\n          }\n        })\n        .catch(err => {\n          console.log(\"Error populating secrets (beneficiary): \" + err);\n          this.setState({ secretViewErrMsg: err.message });\n        });\n    } catch (err) {\n      console.log(\"Error for getting secret by indices (beneficiary): \" + err);\n      this.setState({ secretViewErrMsg: err.message });\n    }\n  }\n\n  async getSecretsForBeneficiary(instance) {\n    // TODO: FIX THE HACK.\n    if (this.state.network === \"private\") {\n      return this.getSecretsForBeneficiaryOasis();\n    }\n\n    const account = this.state.allAccounts[0];\n\n    instance\n      .getSecretsForBeneficiary({\n        from: account.Address,\n        gas: GAS\n      })\n      .then(result => {\n        console.log(\n          \"Result for secrets (beneficiary): \" + JSON.stringify(result)\n        );\n        var staticSecrets = [];\n        var secrets = result.secrets;\n        var names = result.names;\n        var timeBeforeReveals = result.timeBeforeReveals;\n        var lastCheckIns = result.lastCheckIns;\n        var owners = result.owners;\n        var beneficiaryNotes = result.beneficiaryNotes;\n\n        for (var i = 0; i < secrets.length; i++) {\n          staticSecrets.push({\n            name: names[i],\n            testator_notes: \"NONE\",\n            beneficiary_notes: beneficiaryNotes[i],\n            timeBeforeReveal: this.convertMS(timeBeforeReveals[i]),\n            lastCheckIn: lastCheckIns[i],\n            secret: secrets[i],\n            owner_addr: owners[i]\n          });\n        }\n        // TODO: maybe use different allSecrets?\n        this.setState({\n          allSecrets: staticSecrets,\n          // TODO: this is a little hacky and hidden\n          currSecretIndex: undefined\n        });\n      })\n      .catch(err => {\n        console.log(\n          \"Error for getting secrets (beneficiary): \" + JSON.stringify(err)\n        );\n        this.setState({ checkInErrMsg: err.message });\n      });\n  }\n\n  async getSecretsForTestatorOasis() {\n    const account = this.state.allAccounts[0];\n    let staticSecrets = [];\n    let numSecrets = 0;\n\n    // First get the number of secrets.\n    try {\n      numSecrets = await OasisSecretKeeperContract.methods\n        .getNumSecretsForTestator()\n        .call({\n          from: account.Address,\n          gas: GAS\n        });\n    } catch (err) {\n      console.log(\n        \"Error for getting number of secrets from Oasis contract (testator): \" +\n          err\n      );\n      this.setState({ checkInErrMsg: err.message });\n    }\n\n    // Set up calls to get information for each secret.\n    const genPromisesArr = () => {\n      let allPromises = [];\n      for (let i = 0; i < numSecrets; i++) {\n        allPromises.push(\n          OasisSecretKeeperContract.methods\n            .getSecretForTestator(i)\n            .call({ from: account.Address, gas: GAS })\n        );\n      }\n      return allPromises;\n    };\n    let promises = genPromisesArr();\n    try {\n      await Promise.all(promises)\n        .then(response => {\n          for (let i = 0; i < numSecrets; i++) {\n            let result = response[i];\n            staticSecrets.push({\n              name: result.name,\n              testator_notes: \"NONE\",\n              beneficiary_notes: result.beneficiaryNote,\n              timeBeforeReveal: this.convertMS(result.time),\n              secret: result.secret,\n              beneficiary_addr: result.beneficiary\n            });\n          }\n        })\n        .catch(err => {\n          console.log(\"Error populating secrets (testator): \" + err);\n          this.setState({ checkInErrMsg: err.message });\n        });\n    } catch (err) {\n      console.log(\"Error for getting secret by indices (testator): \" + err);\n      this.setState({ checkInErrMsg: err.message });\n    }\n    this.setState({\n      allSecrets: staticSecrets,\n      // TODO: this is a little hacky and hidden\n      currSecretIndex: undefined\n    });\n  }\n\n  async getSecretsForTestator(contractInstance) {\n    // TODO: this is a hack!\n    if (this.state.network === \"private\") {\n      return this.getSecretsForTestatorOasis();\n    }\n\n    const account = this.state.allAccounts[0];\n\n    contractInstance\n      .getSecretsForTestator({\n        from: account.Address,\n        gas: GAS\n      })\n      .then(result => {\n        console.log(\"Result for secrets (testator): \" + JSON.stringify(result));\n        let staticSecrets = [];\n        let names = result.names;\n        let secrets = result.secrets;\n        let times = result.times;\n        let beneficiaries = result.beneficiaries;\n        let beneficiaryNotes = result.beneficiaryNotes;\n\n        for (let i = 0; i < secrets.length; i++) {\n          staticSecrets.push({\n            name: names[i],\n            testator_notes: \"NONE\",\n            beneficiary_notes: beneficiaryNotes[i],\n            timeBeforeReveal: this.convertMS(times[i]),\n            secret: secrets[i],\n            beneficiary_addr: beneficiaries[i]\n          });\n        }\n        this.setState({\n          allSecrets: staticSecrets,\n          // TODO: this is a little hacky and hidden\n          currSecretIndex: undefined\n        });\n      })\n      .catch(err => {\n        console.log(\"Error for getting secrets (testator): \" + err);\n        this.setState({ checkInErrMsg: err.message });\n      });\n  }\n\n  convertMS(ms) {\n    let d, h, m, s;\n    s = Math.floor(ms / 1000);\n    m = Math.floor(s / 60);\n    s = s % 60;\n    h = Math.floor(m / 60);\n    m = m % 60;\n    d = Math.floor(h / 24);\n    h = h % 24;\n    return { days: d, hours: h, minutes: m, seconds: s };\n  }\n\n  convertJSONtoMS(obj) {\n    var wrap = obj => {\n      return obj === undefined ? 0 : obj;\n    };\n    var ms =\n      1000 * parseInt(wrap(obj.seconds)) +\n      60 * 1000 * parseInt(wrap(obj.minutes)) +\n      60 * 60 * 1000 * parseInt(wrap(obj.hours)) +\n      24 * 60 * 60 * 1000 * parseInt(wrap(obj.days));\n    return ms;\n  }\n\n  // Should ONLY be called if installed is true.\n  fetchWeb3Accounts = () => {\n    window.web3.eth.getAccounts(this.setWeb3AccountsIfMetamaskUnlocked);\n  };\n\n  fetchWeb3cAccounts = () => {\n    web3c = new Web3c(window.web3.currentProvider, Web3);\n    web3c.eth.getAccounts(this.setWeb3cAccountsIfMetamaskUnlocked);\n  };\n\n  getContractInfo = network => {\n    let noContract = [\n      {\n        prefix: \"No\",\n        name: \"N/A\",\n        address: \"N/A\"\n      }\n    ];\n\n    if (network === \"ropsten\") {\n      return [\n        {\n          prefix: \"Enigma\",\n          name: \"version_1.0\",\n          address: secretKeeperContractDefinition.networks[ROPSTEN].address\n        }\n      ];\n    } else if (network === \"private\") {\n      return [\n        {\n          prefix: \"Oasis\",\n          name: \"version_1.0\",\n          address:\n            oasisSecretKeeperContractDefinition.networks[OASIS_DEVNET].address\n        }\n      ];\n    } else {\n      return noContract;\n    }\n  };\n\n  state = {\n    anchorEl: null,\n    menuOpen: null,\n    mmState: this.mmState,\n    allAccounts: undefined,\n    allContracts: this.getContractInfo(\"None\"),\n    currMenuIndices: { account: 0, contract: 0, role: 0 },\n    currSecretIndex: undefined,\n    panelActionType: \"View\",\n    editableSecret: {},\n    //allSecrets: staticSecrets,\n    allSecrets: [],\n    allRoles: [\"Testator\", \"Beneficiary\"],\n    currTimestamp: \"None\",\n    currTs: 0,\n    lastCheckIn: \"None\",\n    secretKeeperContract: undefined,\n    checkInErrMsg: \"\",\n    checkInLoading: false,\n    secretViewErrMsg: \"\",\n    secretViewLoading: false,\n    decryptedSecret: undefined,\n    // App setup state\n    metamaskInstalled: false,\n    metamaskUnlocked: false,\n    disclaimerChecked: false,\n    network: \"None\",\n    shouldLaunch: false\n  };\n\n  isSetupComplete = () => {\n    return (\n      this.state.metamaskInstalled &&\n      this.state.metamaskUnlocked &&\n      [\"ropsten\", \"private\"].includes(this.state.network) &&\n      this.state.disclaimerChecked &&\n      this.state.shouldLaunch\n    );\n  };\n\n  handleLaunch = () => {\n    this.setState({ shouldLaunch: true });\n  };\n\n  setCurrMenuIndex = menuName => index => {\n    let newInds = JSON.parse(JSON.stringify(this.state.currMenuIndices));\n    newInds[menuName] = index;\n\n    // Update the state for the selection.\n    if (this.state.currMenuIndices.role !== newInds.role) {\n      if (newInds.role === 0) {\n        // TODO: get secrets for beneficiary.\n        this.getSecretsForTestator(this.state.secretKeeperContract);\n      } else if (newInds.role === 1) {\n        this.getSecretsForBeneficiary(this.state.secretKeeperContract);\n      }\n    }\n\n    this.setState({ currMenuIndices: newInds });\n  };\n\n  componentDidMount() {\n    this.metamaskSetup();\n  }\n\n  loadWeb3 = async () => {\n    var metamaskInstalled = false;\n    var network = \"None\";\n\n    // Modern dapp browsers...\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      metamaskInstalled = this.isMetamaskInstalled();\n      // Do an update now since we need to request account access.\n      this.setState({ metamaskInstalled: metamaskInstalled });\n      try {\n        // Request account access if needed\n        // TODO: if the user just exits here, it doesn't throw an error.\n        await window.ethereum.enable();\n        this.mmState = \"Connected\";\n\n        network = await this.logNetworkModern();\n\n        if (network === \"ropsten\") {\n          this.getCurrTimestamp();\n        } else if (network === \"private\") {\n          Web3c.Promise.then(this.getCurrWeb3cTimestamp);\n        }\n\n        // Acccounts now exposed\n        /*\n              window.web3.eth.sendTransaction({\n\n              });\n              */\n      } catch (error) {\n        // User denied account access...\n        console.log(error);\n        this.mmState = \"USER ACCESS DENIED: Got an error: \" + error;\n      }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n      metamaskInstalled = this.isMetamaskInstalled();\n      // Do an update now since we need to request account access.\n      this.setState({ metamaskInstalled: metamaskInstalled });\n      // Acccounts always exposed\n      this.mmState = \"OK: Found legacy Dapp browser.\";\n      // TODO: test if you need to log in a different manner here with web3.version.getNetwork();\n      /*\n          window.web3.eth.sendTransaction({\n\n          });\n          */\n      network = await this.logNetworkModern();\n\n      if (network === \"ropsten\") {\n        this.getCurrTimestamp();\n      } else if (network === \"private\") {\n        Web3c.Promise.then(this.getCurrWeb3cTimestamp);\n      }\n    }\n    // Non-dapp browsers...\n    else {\n      this.mmState = \"NO_SUPPORT\";\n      let msg =\n        \"Non-Ethereum browser detected. You should consider trying MetaMask!\";\n      console.log(msg);\n      this.mmState = \"NO_SUPPORT: \" + msg;\n    }\n\n    if (metamaskInstalled) {\n      // TODO: this does a setState() for allAccounts and gets the contract instance, make it more clear.\n      // TODO: We assume here that the network is not private.\n      if (network === \"ropsten\") {\n        this.fetchWeb3Accounts();\n      } else if (network === \"private\") {\n        // TODO: this is bad, should only need to load this once.\n        Web3c.Promise.then(this.fetchWeb3cAccounts);\n      }\n    }\n\n    this.setState({\n      mmState: this.mmState,\n      metamaskInstalled: metamaskInstalled\n    });\n  };\n\n  metamaskSetup = () => {\n    this.setState({ mmState: \"NOT_LOGGED_IN (please complete login)\" });\n    this.loadWeb3();\n  };\n\n  handleChange = event => {\n    this.setState({ auth: event.target.checked });\n  };\n\n  handleMenu = menuName => event => {\n    this.setState({ menuOpen: menuName });\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({ menuOpen: null, anchorEl: null });\n  };\n\n  handleViewOnClick = index => () => {\n    this.setState({ currSecretIndex: index, panelActionType: \"View\" });\n  };\n\n  handleEditClick = index => (event, value) => {\n    let toEdit = this.state.allSecrets[index];\n\n    // Need to decrypt the secret.\n    let copy = JSON.parse(JSON.stringify(toEdit));\n    copy.secret = getDecryptedValueFromHex(copy.secret, this.state.network);\n\n    this.setState({\n      currSecretIndex: index,\n      panelActionType: \"Edit\",\n      editableSecret: copy\n    });\n  };\n\n  handleReloadSetup = () => {\n    this.metamaskSetup();\n  };\n\n  handleCancel = event => {\n    this.setState({ currSecretIndex: undefined, panelActionType: \"View\" });\n  };\n\n  handleNewSecret = event => {\n    this.setState({\n      currSecretIndex: undefined,\n      panelActionType: \"New\",\n      editableSecret: { timeBeforeReveal: {} }\n    });\n  };\n\n  handleSave = async event => {\n    if (this.state.panelActionType === \"Edit\") {\n      this.editSecret();\n    } else if (this.state.panelActionType === \"New\") {\n      this.addNewSecret();\n    }\n  };\n\n  // TODO: merge this with addSecret (select either secret or newSecret).\n  editSecret() {\n    this.setState({\n      secretViewLoading: true,\n      secretViewErrMsg: \"Editing secret...\"\n    });\n    // TODO: decide how to input timestamp.\n    let newSecret = this.state.editableSecret;\n\n    var name = newSecret.name;\n    var beneficiaryNotes = newSecret.beneficiary_notes;\n    var timeDelayMs = this.convertJSONtoMS(newSecret.timeBeforeReveal);\n    let secret = getEncryptedValue(newSecret.secret);\n    var beneficiaryAddr = newSecret.beneficiary_addr;\n\n    const account = this.state.allAccounts[0];\n\n    // TODO: do this next\n    let call;\n    if (this.state.network === \"ropsten\") {\n      secret = window.web3.utils.asciiToHex(secret);\n      call = this.state.secretKeeperContract.editTestatorSecretInfo(\n        this.state.currSecretIndex,\n        secret,\n        name,\n        timeDelayMs,\n        beneficiaryAddr,\n        beneficiaryNotes,\n        { from: account.Address, gas: GAS }\n      );\n    } else if (this.state.network === \"private\") {\n      call = this.state.secretKeeperContract.methods\n        .editTestatorSecretInfo(\n          this.state.currSecretIndex,\n          secret,\n          name,\n          timeDelayMs,\n          beneficiaryAddr,\n          beneficiaryNotes\n        )\n        .send({ from: account.Address, gas: GAS });\n    }\n\n    call\n      .then(result => {\n        console.log(result);\n        this.setState({\n          secretViewErrMsg: \"Edit success!\",\n          secretViewLoading: false,\n          panelActionType: \"View\",\n          currSecretIndex: undefined\n        });\n        this.getSecretsForTestator(this.state.secretKeeperContract);\n      })\n      .catch(err => {\n        console.log(err.message);\n        this.setState({\n          secretViewErrMsg: err.message,\n          secretViewLoading: false\n        });\n      });\n  }\n\n  addNewSecret() {\n    this.setState({\n      secretViewLoading: true,\n      secretViewErrMsg: \"Adding secret...\"\n    });\n    // TODO: decide how to input timestamp.\n    let newSecret = this.state.editableSecret;\n\n    var name = newSecret.name;\n    console.log(\"name \" + name);\n\n    var beneficiaryNotes = newSecret.beneficiary_notes;\n    var timeDelayMs = this.convertJSONtoMS(newSecret.timeBeforeReveal);\n    var secret = getEncryptedValue(newSecret.secret);\n\n    var beneficiaryAddr = newSecret.beneficiary_addr;\n\n    const account = this.state.allAccounts[0];\n\n    let args = [\n      this.state.network === \"private\"\n        ? secret\n        : window.web3.utils.asciiToHex(secret),\n      name,\n      timeDelayMs,\n      beneficiaryAddr,\n      beneficiaryNotes\n    ];\n\n    let result;\n    if (this.state.network === \"private\") {\n      // TODO: switch this to use state.\n      result = OasisSecretKeeperContract.methods\n        .addTestatorSecretInfo(...args)\n        .send({ from: account.Address, gas: GAS });\n    } else if (this.state.network === \"ropsten\") {\n      result = this.state.secretKeeperContract.addTestatorSecretInfo(...args, {\n        from: account.Address,\n        gas: GAS\n      });\n    }\n\n    result\n      .then(result => {\n        console.log(result);\n        this.setState({\n          secretViewErrMsg: \"Success!\",\n          secretViewLoading: false,\n          panelActionType: \"View\",\n          currSecretIndex: undefined\n        });\n\n        this.getSecretsForTestator(this.state.secretKeeperContract);\n      })\n      .catch(err => {\n        console.log(err.message);\n        this.setState({\n          secretViewErrMsg: err.message,\n          secretViewLoading: false\n        });\n      });\n  }\n\n  updateEditable = key => event => {\n    let editedSecret = this.state.editableSecret;\n    editedSecret[key] = event.target.value;\n    this.setState({ editableSecret: editedSecret });\n  };\n\n  updateTimeEditable = (key, timeKey) => event => {\n    let editedSecret = this.state.editableSecret;\n    editedSecret[key][timeKey] = event.target.value;\n    this.setState({ editableSecret: editedSecret });\n  };\n\n  // Calls getSecretsForTestator() to update secret list after successful transaction receipt.\n  handleDelete = index => event => {\n    this.setState({\n      secretViewErrMsg: \"Deleting secret...\",\n      secretViewLoading: true\n    });\n\n    const account = this.state.allAccounts[0];\n    const currActionType = this.state.panelActionType;\n\n    let call;\n    if (this.state.network === \"private\") {\n      call = this.state.secretKeeperContract.methods\n        .deleteTestatorSecretInfoByIndex(index)\n        .send({\n          from: account.Address,\n          gas: GAS\n        });\n    } else {\n      call = this.state.secretKeeperContract.deleteTestatorSecretInfoByIndex(\n        index,\n        {\n          from: account.Address,\n          gas: GAS\n        }\n      );\n    }\n\n    call\n      .then(result => {\n        console.log(result);\n\n        // TODO: find a better way to handle case where the current secret is being edited.\n        if (currActionType === \"Edit\" && index === this.state.currSecretIndex) {\n          this.setState({\n            secretViewErrMsg: \"Delete success!\",\n            secretViewLoading: false,\n            // TODO: you may want this to stay open, except if you're interacting with the secret that got deleted.\n            panelActionType: \"View\",\n            currSecretIndex: undefined\n          });\n        } else {\n          this.setState({\n            secretViewErrMsg: \"Delete success!\",\n            secretViewLoading: false,\n            // TODO: you may want this to stay open, except if you're interacting with the secret that got deleted.\n            panelActionType: currActionType\n          });\n        }\n\n        this.getSecretsForTestator(this.state.secretKeeperContract);\n      })\n      .catch(err => {\n        console.log(err.message);\n        this.setState({\n          secretViewErrMsg: err.message,\n          secretViewLoading: false\n        });\n      });\n  };\n\n  handleRefresh = event => {\n    this.getCurrTimestamp();\n    this.getLastCheckIn(\n      this.state.allAccounts[0],\n      \"Refreshed timestamp and last check in\"\n    );\n    this.getSecretsForTestator(this.state.secretKeeperContract);\n    // TODO: probably want to update secrets for beneficiary as well\n  };\n\n  handleCheckIn = async event => {\n    ReactGA.event({\n      category: \"User\",\n      action: \"Check In\"\n    });\n    this.doCheckIn();\n  };\n\n  handleCheckDisclaimer = event => {\n    this.setState({ disclaimerChecked: event.target.checked });\n  };\n\n  handleDecryptSecret = index => () => {\n    // TODO: make separate views for each action?\n    this.setState({\n      secretViewErrMsg: \"Mock decrypting secret...\",\n      secretViewLoading: true\n    });\n\n    let call;\n\n    const account = this.state.allAccounts[0];\n    if (this.state.network === \"private\") {\n      call = this.state.secretKeeperContract.methods\n        .decryptSecretForBeneficiary(index)\n        .send({\n          from: account.Address,\n          gas: GAS\n        });\n    } else {\n      call = this.state.secretKeeperContract.decryptSecretForBeneficiary(\n        index,\n        {\n          from: account.Address,\n          gas: GAS\n        }\n      );\n    }\n\n    call\n      .then(result => {\n        const receipt = result;\n        //TODO: another hacky fix\n\n        if (this.state.network === \"ropsten\") {\n          this.setState({\n            secretViewErrMsg: \"Mock decrypt success!\",\n            secretViewLoading: false,\n            decryptedSecret: getDecryptedValueFromHex(\n              result,\n              this.state.network\n            )\n          });\n        } else if (this.state.network === \"private\") {\n          this.state.secretKeeperContract\n            .getPastEvents(\"allEvents\", {\n              _from: this.state.allAccounts[0].Address,\n              fromBlock: receipt.blockNumber,\n              toBlock: receipt.blockNumber\n            })\n            .then(result2 => {\n              // TODO: hack, assuming that this is length 1\n              console.log(\"Got past events: \" + JSON.stringify(result2));\n              this.setState({\n                decryptedSecret: getDecryptedValueFromHex(\n                  result2[0].returnValues.secret,\n                  this.state.network\n                )\n              });\n            })\n            .catch(err => {\n              console.log(err.message);\n              this.setState({\n                secretViewErrMsg: err.message,\n                secretViewLoading: false\n              });\n            });\n          this.setState({\n            secretViewErrMsg:\n              \"Mock decrypt success, please wait for event to be triggered.\",\n            secretViewLoading: false\n          });\n        }\n      })\n      .catch(err => {\n        console.log(err.message);\n        this.setState({\n          secretViewErrMsg: err.message,\n          secretViewLoading: false\n        });\n      });\n  };\n\n  render() {\n    const { classes } = this.props;\n\n    // TODO: find a better way to handle this case in all components.\n    const allAccounts =\n      this.state.allAccounts === undefined\n        ? [{ Type: \"NONE\", Address: \"None\" }]\n        : this.state.allAccounts;\n\n    const secretProp =\n      this.state.currSecretIndex === undefined\n        ? undefined\n        : JSON.parse(\n            JSON.stringify(this.state.allSecrets[this.state.currSecretIndex])\n          );\n\n    // TODO: this is a hack and needs to be cleaned up.\n    if (!this.isSetupComplete()) {\n      return (\n        <MuiThemeProvider theme={theme}>\n          <div className={classes.root}>\n            <CustomAppBar\n              allAccounts={this.state.allAccounts}\n              allContracts={this.state.allContracts}\n              allRoles={this.state.allRoles}\n              currMenuIndices={this.state.currMenuIndices}\n              setCurrMenuIndex={this.setCurrMenuIndex}\n              setupComplete={false}\n            />\n            <AppSetup\n              metamaskInstalled={this.state.metamaskInstalled}\n              metamaskUnlocked={this.state.metamaskUnlocked}\n              network={this.state.network}\n              disclaimerChecked={this.state.disclaimerChecked}\n              handleCheckDisclaimer={this.handleCheckDisclaimer}\n              handleLaunch={this.handleLaunch}\n              handleReload={this.handleReloadSetup}\n            />\n          </div>\n        </MuiThemeProvider>\n      );\n    }\n\n    const renderSecretPanel = () => {\n      if (\n        (this.state.secretViewErrMsg !== \"\" &&\n          this.state.secretViewErrMsg !== undefined) ||\n        this.state.secretViewLoading\n      ) {\n        return (\n          <Grid item>\n            <Paper align=\"center\" className={classes.paper}>\n              <div style={{ padding: 10 }}>\n                <TextField\n                  id=\"outlined-multiline-static\"\n                  multiline\n                  rows=\"4\"\n                  label={\"Message\"}\n                  value={this.state.secretViewErrMsg}\n                  className={classes.textField}\n                  disabled={true}\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  fullWidth\n                />\n                {this.state.secretViewLoading ? (\n                  <div>\n                    <CircularProgress className={classes.progress} />\n                  </div>\n                ) : (\n                  \"\"\n                )}\n              </div>\n            </Paper>\n          </Grid>\n        );\n      }\n    };\n\n    const renderCheckInPanel = () => {\n      if (\n        (this.state.checkInErrMsg !== \"\" &&\n          this.state.checkInErrMsg !== undefined) ||\n        this.state.checkInLoading\n      ) {\n        return (\n          <Grid item>\n            <Paper align=\"left\" className={classes.paper}>\n              <div style={{ padding: 10 }}>\n                <TextField\n                  id=\"outlined-multiline-static\"\n                  multiline\n                  rows=\"4\"\n                  label={\"Message\"}\n                  value={this.state.checkInErrMsg}\n                  className={classes.textField}\n                  disabled={true}\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  fullWidth\n                />\n                {this.state.checkInLoading ? (\n                  <div>\n                    <CircularProgress className={classes.progress} />\n                  </div>\n                ) : (\n                  \"\"\n                )}\n              </div>\n            </Paper>\n          </Grid>\n        );\n      }\n    };\n\n    const renderMainGrid = useMobileLayout => {\n      const gridDirection = useMobileLayout ? \"column\" : \"row\";\n      const leftPaneWidth = useMobileLayout ? 12 : 4;\n      const rightPaneWidth = useMobileLayout ? 12 : 8;\n\n      return (\n        <Grid\n          container\n          spacing={8}\n          direction={gridDirection}\n          alignItems=\"stretch\"\n          alignContent=\"center\"\n          justify=\"center\"\n          style={{ paddingTop: \"10px\" }}\n        >\n          {/* TODO: clean up the mmstate and figure out what to display. */}\n          <Grid item xs={10}>\n            {/* Outer grid*/}\n            {/*Left and right panes */}\n            <Grid container direction={gridDirection} spacing={8}>\n              {/* Left pane */}\n              <Grid\n                item\n                container\n                direction={\"column\"}\n                spacing={8}\n                xs={leftPaneWidth}\n              >\n                <Grid item>\n                  <Paper align=\"center\" className={classes.paper}>\n                    {this.state.currMenuIndices.role === 0 ? (\n                      <SecretList\n                        currAccount={\n                          allAccounts[this.state.currMenuIndices[\"account\"]]\n                        }\n                        handleEditClick={this.handleEditClick}\n                        secrets={this.state.allSecrets}\n                        handleViewOnClick={this.handleViewOnClick}\n                        currSecretIndex={this.state.currSecretIndex}\n                        handleCancel={this.handleCancel}\n                        handleNewSecret={this.handleNewSecret}\n                        panelActionType={this.state.panelActionType}\n                        handleDelete={this.handleDelete}\n                        secretKeeperContract={this.state.secretKeeperContract}\n                        role={this.state.currMenuIndices.role}\n                      />\n                    ) : (\n                      <BeneficiarySecretList\n                        secrets={this.state.allSecrets}\n                        currSecretIndex={this.state.currSecretIndex}\n                        handleViewOnClick={this.handleViewOnClick}\n                        panelActionType={this.state.panelActionType}\n                        secretKeeperContract={this.state.secretKeeperContract}\n                        role={this.state.currMenuIndices.role}\n                        currAccount={\n                          allAccounts[this.state.currMenuIndices[\"account\"]]\n                        }\n                      />\n                    )}\n                  </Paper>\n                </Grid>\n                <Grid item>\n                  <Paper align=\"center\" className={classes.paper}>\n                    <div style={{ padding: 10 }}>\n                      <strong>Last check in:</strong>\n                      <br />\n                      {this.state.lastCheckIn}\n                    </div>\n                    <div style={{ padding: 10 }}>\n                      <strong>Current timestamp:</strong>\n                      <br />\n                      {this.state.currTimestamp}\n                    </div>\n                    <div>\n                      {/*TODO: assuming accounts are loaded here, but you should actually check in case someone logged out.*/}\n                      <Button\n                        color=\"primary\"\n                        variant=\"contained\"\n                        className={classes.button}\n                        disabled={this.state.secretKeeperContract === undefined}\n                        onClick={this.handleCheckIn}\n                      >\n                        Check In\n                      </Button>\n                      <IconButton\n                        aria-label=\"Refresh\"\n                        disabled={this.state.secretKeeperContract === undefined}\n                        onClick={this.handleRefresh}\n                      >\n                        <RefreshIcon />\n                      </IconButton>\n                    </div>\n                  </Paper>\n                </Grid>\n                {renderCheckInPanel()}\n                {renderSecretPanel()}\n              </Grid>\n              {/* Right pane */}\n              <Grid item xs={rightPaneWidth}>\n                <div className={classes.root}>\n                  <Paper align={\"center\"} className={classes.paper}>\n                    {this.state.currMenuIndices.role === 0 ? (\n                      <TestatorSecretView\n                        secretProp={secretProp}\n                        actionType={this.state.panelActionType}\n                        editableSecret={this.state.editableSecret}\n                        updateEditable={this.updateEditable}\n                        updateTimeEditable={this.updateTimeEditable}\n                        handleSave={this.handleSave}\n                        handleCancel={this.handleCancel}\n                        secretViewLoading={this.state.secretViewLoading}\n                        network={this.state.network}\n                      />\n                    ) : (\n                      <BeneficiarySecretView\n                        secretProp={secretProp}\n                        actionType={this.state.panelActionType}\n                        handleRetrieveSecret={this.handleRetrieveSecret}\n                        secretViewLoading={this.state.secretViewLoading}\n                        currTs={this.state.currTs}\n                        network={this.state.network}\n                        convertJSONToMS={this.convertJSONtoMS}\n                        decryptedSecret={this.state.decryptedSecret}\n                        decryptSecret={this.handleDecryptSecret(\n                          this.state.currSecretIndex\n                        )}\n                      />\n                    )}\n                  </Paper>\n                </div>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      );\n    };\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <CssBaseline />\n        <div className={classes.root}>\n          <CustomAppBar\n            allAccounts={this.state.allAccounts}\n            allContracts={this.state.allContracts}\n            allRoles={this.state.allRoles}\n            currMenuIndices={this.state.currMenuIndices}\n            setCurrMenuIndex={this.setCurrMenuIndex}\n            setupComplete={true}\n          />\n          <MediaQuery query=\"(max-width: 1224px), (max-device-width: 1224px)\">\n            {renderMainGrid(true)}\n          </MediaQuery>\n          <MediaQuery query=\"(min-device-width: 1224px) and (min-width: 1224px)\">\n            {renderMainGrid(false)}\n          </MediaQuery>\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nMainApp.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\n// Function to encrypt values (in this case either address or net worth)\nfunction getEncryptedValue(value) {\n  let clientPrivKey =\n    \"853ee410aa4e7840ca8948b8a2f67e9a1c2f4988ff5f4ec7794edf57be421ae5\";\n  let enclavePubKey =\n    \"0061d93b5412c0c99c3c7867db13c4e13e51292bd52565d002ecf845bb0cfd8adfa5459173364ea8aff3fe24054cca88581f6c3c5e928097b9d4d47fce12ae47\";\n  let derivedKey = engUtils.getDerivedKey(enclavePubKey, clientPrivKey);\n  let encrypted = engUtils.encryptMessage(derivedKey, value);\n\n  return encrypted;\n}\n\n// TODO: this is hacky and hidden. Shows up both here and in TestatorSecretView.\nfunction getDecryptedValueFromHex(value, network) {\n  let ascii = value;\n  if (network === \"ropsten\") {\n    ascii = window.web3.utils.toAscii(value);\n  }\n  return getDecryptedValue(ascii);\n}\n\n// Function to encrypt values (in this case either address or net worth)\nfunction getDecryptedValue(value) {\n  let clientPrivKey =\n    \"853ee410aa4e7840ca8948b8a2f67e9a1c2f4988ff5f4ec7794edf57be421ae5\";\n  let enclavePubKey =\n    \"0061d93b5412c0c99c3c7867db13c4e13e51292bd52565d002ecf845bb0cfd8adfa5459173364ea8aff3fe24054cca88581f6c3c5e928097b9d4d47fce12ae47\";\n  let derivedKey = engUtils.getDerivedKey(enclavePubKey, clientPrivKey);\n  let decrypted = engUtils.decryptMessage(derivedKey, value);\n\n  return decrypted;\n}\n\nexport default withStyles(styles)(MainApp);\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport Slide from \"@material-ui/core/Slide\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing.unit * 2\n  },\n  root: {\n    width: \"100%\",\n    maxWidth: 540,\n    backgroundColor: theme.palette.background.paper\n  },\n  toolbarButtons: {\n    marginLeft: \"auto\"\n  },\n  customWidth: {\n    maxWidth: 500\n  },\n  noMaxWidth: {\n    maxWidth: \"none\"\n  }\n});\n\nfunction Transition(props) {\n  return <Slide direction=\"up\" {...props} />;\n}\n\nclass BeneficiarySecretList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currSecretName: undefined\n    };\n  }\n\n  render() {\n    const { classes } = this.props;\n    const secrets = this.props.secrets;\n    let currAccount =\n      this.props.currAccount === undefined\n        ? { Type: \"None\", Address: \"None\" }\n        : this.props.currAccount;\n    const secretName =\n      this.state.indexToDelete === undefined\n        ? \"NONE\"\n        : secrets[this.state.indexToDelete].name;\n    return (\n      <div className={classes.root}>\n        <div style={{ paddingTop: \"10px\" }}>\n          <strong>Beneficiary Address:</strong>\n          <br />\n          {currAccount[\"Address\"].substring(0, 10) + \"...\"}\n        </div>\n        <div style={{ paddingTop: \"10px\" }}>\n          <strong> {\"Secrets (\" + secrets.length + \")\"}</strong>\n        </div>\n        <List>\n          {secrets.map((value, index) => {\n            return (\n              <ListItem\n                key={index}\n                role={undefined}\n                dense\n                button\n                selected={this.props.currSecretIndex === index}\n                onClick={this.props.handleViewOnClick(index)}\n              >\n                <ListItemText primary={value[\"name\"]} />\n              </ListItem>\n            );\n          })}\n        </List>\n      </div>\n    );\n  }\n}\n\nBeneficiarySecretList.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(BeneficiarySecretList);\n","import Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport { Link } from \"react-router-dom\";\nimport { HashLink } from \"react-router-hash-link\";\nimport React from \"react\";\nimport VpnKeyIcon from \"@material-ui/icons/VpnKey\";\nimport ComputerIcon from \"@material-ui/icons/Computer\";\nimport WebIcon from \"@material-ui/icons/Web\";\nimport SaveAltIcon from \"@material-ui/icons/SaveAlt\";\nimport TimerIcon from \"@material-ui/icons/Timer\";\nimport {\n  VerticalTimeline,\n  VerticalTimelineElement\n} from \"react-vertical-timeline-component\";\nimport \"react-vertical-timeline-component/style.min.css\";\n// Taken from https://github.com/stephane-monnot/react-vertical-timeline/tree/master/docs\nimport \"./static/react-vertical-timeline-main.css\";\n\nconst HomeContent = props => ({ match }) => {\n  const { classes } = props;\n  return (\n    <div>\n      <main className={classes.layout}>\n        {/* Hero unit */}\n        <div className={classes.heroContent}>\n          <Typography\n            component=\"h1\"\n            variant=\"h2\"\n            align=\"center\"\n            color=\"textPrimary\"\n            gutterBottom\n          >\n            DIY Digital Asset Inheritance\n          </Typography>\n          <Typography\n            variant=\"h6\"\n            align=\"center\"\n            color=\"textSecondary\"\n            component=\"p\"\n          >\n            SecretKeeper is a decentralized{\" \"}\n            <a\n              href=\"https://en.wikipedia.org/wiki/Dead_man%27s_switch#Software\"\n              target={\"_blank\"}\n              style={{ color: \"inherit\" }}\n            >\n              dead man's switch\n            </a>\n            , built with{\" \"}\n            <a\n              href=\"https://blog.enigma.co/defining-secret-contracts-f40ddee67ef2\"\n              target={\"_blank\"}\n              style={{ color: \"inherit\" }}\n            >\n              Enigma secret contracts\n            </a>{\" \"}\n            on the{\" \"}\n            <a\n              href=\"https://www.ethereum.org/\"\n              target={\"_blank\"}\n              style={{ color: \"inherit\" }}\n            >\n              Ethereum blockchain.\n            </a>\n            <br />\n            There is also a separate implementation on the{\" \"}\n            <a\n              href=\"https://docs.oasiscloud.io/en/latest/\"\n              target={\"_blank\"}\n              style={{ color: \"inherit\" }}\n            >\n              Oasis Devnet,\n            </a>{\" \"}\n            which uses{\" \"}\n            <a\n              href=\"https://arxiv.org/pdf/1804.05141.pdf\"\n              target={\"_blank\"}\n              style={{ color: \"inherit\" }}\n            >\n              its own blockchain.\n            </a>\n          </Typography>\n          <div className={classes.heroButtons}>\n            <Grid container spacing={16} justify=\"center\">\n              <Grid item>\n                <HashLink\n                  to={\"/#why-use-secret-keeper\"}\n                  style={{ textDecoration: \"none\", color: \"inherit\" }}\n                >\n                  <Button variant=\"contained\" color=\"primary\">\n                    Learn more\n                  </Button>\n                </HashLink>\n              </Grid>\n              <Grid item>\n                <Link\n                  to={\"/app\"}\n                  style={{ textDecoration: \"none\", color: \"inherit\" }}\n                >\n                  <Button variant=\"outlined\" color=\"primary\">\n                    Try the app\n                  </Button>\n                </Link>\n              </Grid>\n            </Grid>\n          </div>\n        </div>\n        {/* End hero unit */}\n        <Typography\n          variant=\"h6\"\n          align=\"center\"\n          color=\"textSecondary\"\n          component=\"p\"\n        >\n          Please be aware that the app and site are still under construction.\n          <br />\n          This app is a proof of concept. Do not store real secrets or enter any\n          personal information when using the app. <br />\n          Enigma is not currently live, so any secret contract features such as\n          the time delay release are unavailable until that point.\n          <br />\n          The current app can be used to publicly store PGP encrypted messages\n          on the Ropsten testnet. We recommend following our guide to encrypt a\n          message with a Ledger or Trezor to use with the app.\n        </Typography>\n        {/* Begin hero unit */}\n        <div className={classes.heroContent}>\n          <Typography\n            component=\"h1\"\n            variant=\"h3\"\n            align=\"center\"\n            color=\"textPrimary\"\n          >\n            <div id={\"why-use-secret-keeper\"} />\n            Why use SecretKeeper?\n          </Typography>\n        </div>\n        <div>\n          <Typography\n            variant=\"h6\"\n            align=\"center\"\n            color=\"textSecondary\"\n            component=\"p\"\n          >\n            Whether it's your cryptocurrency hardware wallet passphrase or the\n            location where you store your most precious beanie babies, some\n            secrets are too important to be forgotten.\n            <br />\n            When you're no longer around, these secrets should be available to\n            the people you trust.\n            <br /> SecretKeeper allows you to store a secret on a decentralized\n            network that will be available 24/7 for the beneficiary to retrieve,\n            after a time delay has passed. If you keep a{\" \"}\n            <a\n              href=\"https://github.com/secretkeeperapp/secret-keeper-site\"\n              style={{ color: \"inherit\" }}\n            >\n              local copy of this site\n            </a>\n            , you will be able to use the contract as long as the Ethereum and\n            Enigma networks survive, regardless of whether this server is around\n            or not.\n          </Typography>\n        </div>\n        {/* End hero unit */}\n        {/* Begin hero unit */}\n        <div className={classes.heroContent}>\n          <Typography\n            component=\"h1\"\n            variant=\"h2\"\n            align=\"center\"\n            color=\"textPrimary\"\n            gutterBottom\n          >\n            How it works\n          </Typography>\n          <Typography\n            variant=\"h6\"\n            align=\"center\"\n            color=\"textSecondary\"\n            component=\"p\"\n          >\n            {\" \"}\n            The goal of SecretKeeper is to allow a testator (you) to store a\n            secret for a beneficiary (you or someone else), to be revealed at a\n            later date. Some features are not yet supported.{\" \"}\n          </Typography>\n        </div>\n        {/* End hero unit */}\n      </main>\n\n      <div style={{ background: \"#506184\" }}>\n        <VerticalTimeline>\n          <VerticalTimelineElement\n            className=\"vertical-timeline-element--work\"\n            iconStyle={{ background: \"rgb(0, 204, 0)\", color: \"#fff\" }}\n            icon={<VpnKeyIcon />}\n            position={\"left\"}\n          >\n            <h3 className=\"vertical-timeline-element-title\">\n              [OPTIONAL] Beneficiary provides PGP public key\n            </h3>\n            <h4 className=\"vertical-timeline-element-subtitle\">\n              Status: Supported\n            </h4>\n            <p>\n              The beneficiary uses a hardware wallet to generate a PGP public\n              key.\n              <br />\n              This functionality is provided for an extra layer of security\n              against the enclave. Enigma will already be able to encrypt\n              sensitive data for specific recipients.\n            </p>\n          </VerticalTimelineElement>\n          <VerticalTimelineElement\n            className=\"vertical-timeline-element--work\"\n            iconStyle={{ background: \"rgb(33, 150, 243)\", color: \"#fff\" }}\n            icon={<ComputerIcon />}\n            position={\"right\"}\n          >\n            <h3 className=\"vertical-timeline-element-title\">\n              [OPTIONAL] Testator encrypts secret locally with PGP\n            </h3>\n            <h4 className=\"vertical-timeline-element-subtitle\">\n              Status: Supported\n            </h4>\n            <p>\n              If desired, the testator may encrypt the secret with the\n              beneficiary's PGP public key beforehand.\n            </p>\n          </VerticalTimelineElement>\n          <VerticalTimelineElement\n            className=\"vertical-timeline-element--work\"\n            iconStyle={{ background: \"rgb(33, 150, 243)\", color: \"#fff\" }}\n            icon={<WebIcon />}\n            position={\"right\"}\n          >\n            <h3 className=\"vertical-timeline-element-title\">\n              Testator encrypts secret in browser with AES\n            </h3>\n            <h4 className=\"vertical-timeline-element-subtitle\">\n              Status: Not yet supported (skipped)\n            </h4>\n            <p>\n              The testator uses Enigma's Javascript utilities to encrypt the\n              secret for the Enigma enclave, using a one-time shared key that\n              the enclave knows.\n            </p>\n          </VerticalTimelineElement>\n          <VerticalTimelineElement\n            className=\"vertical-timeline-element--work\"\n            iconStyle={{ background: \"rgb(33, 150, 243)\", color: \"#fff\" }}\n            icon={<SaveAltIcon />}\n            position={\"right\"}\n          >\n            <h3 className=\"vertical-timeline-element-title\">\n              Testator stores secret\n            </h3>\n            <h4 className=\"vertical-timeline-element-subtitle\">\n              Status: Partially supported (mocked)\n            </h4>\n            <p>\n              The testator stores the encrypted secret, a time delay amount, and\n              the beneficiary's Ethereum address in a secret contract.\n            </p>\n          </VerticalTimelineElement>\n          <VerticalTimelineElement\n            className=\"vertical-timeline-element--work\"\n            iconStyle={{ background: \"rgb(33, 150, 243)\", color: \"#fff\" }}\n            icon={<TimerIcon />}\n            position={\"right\"}\n          >\n            <h3 className=\"vertical-timeline-element-title\">\n              Testator checks in\n            </h3>\n            <h4 className=\"vertical-timeline-element-subtitle\">\n              Status: Partially supported (mocked)\n            </h4>\n            <p>\n              The testator checks in with the contract periodically. If the time\n              delay amount passes after the testator's most recent check in\n              time, the secret is unlocked.\n            </p>\n          </VerticalTimelineElement>\n          <VerticalTimelineElement\n            className=\"vertical-timeline-element--work\"\n            iconStyle={{ background: \"rgb(0, 204, 0)\", color: \"#fff\" }}\n            icon={<VpnKeyIcon />}\n            position={\"left\"}\n          >\n            <h3 className=\"vertical-timeline-element-title\">\n              Beneficiary decrypts secret\n            </h3>\n            <h4 className=\"vertical-timeline-element-subtitle\">\n              Status: Partially supported (mocked)\n            </h4>\n            <p>\n              The beneficiary triggers the secret contract. If the secret is\n              unlocked, the Enigma enclave will encrypt the secret for the\n              beneficiary and send it as a response.\n            </p>\n          </VerticalTimelineElement>\n        </VerticalTimeline>\n      </div>\n    </div>\n  );\n};\n\nexport default HomeContent;\n","import React from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport guideContentPath from \"./static/hardware_wallet_instructions.md\";\n\nconst DefaultCodeRenderer = ReactMarkdown.renderers.code;\nconst DefaultBQRenderer = ReactMarkdown.renderers.blockquote;\n\nconst CodeRenderer = props => {\n  return (\n    <div\n      className=\"bg-black-10 br2 pa2\"\n      style={{\n        overflowY: \"scroll\",\n        backgroundColor: \"black\",\n        color: \"white\"\n      }}\n    >\n      <DefaultCodeRenderer {...props} />\n    </div>\n  );\n};\n\nconst BQRenderer = props => {\n  return (\n    <div\n      className=\"bg-black-10 br2 pa2\"\n      style={{\n        backgroundColor: \"lightGray\",\n        padding: \"10px\"\n      }}\n    >\n      <DefaultBQRenderer {...props} />\n    </div>\n  );\n};\n\nconst GuideContentFunc = props => () => {\n  return (\n    <div style={{ paddingLeft: \"10px\", paddingRight: \"10px\" }}>\n      <GuideContent {...props} />\n    </div>\n  );\n};\n\nclass GuideContent extends React.Component {\n  state = {\n    terms: \"\"\n  };\n\n  componentWillMount() {\n    fetch(guideContentPath)\n      .then(response => response.text())\n      .then(text => {\n        this.setState({ terms: text });\n      });\n  }\n\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <ReactMarkdown\n        source={this.state.terms}\n        renderers={{ code: CodeRenderer, blockquote: BQRenderer }}\n      />\n    );\n  }\n}\n\nexport default GuideContentFunc;\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst FAQContent = props => ({ match }) => {\n  const { classes } = props;\n  return (\n    <div>\n      <Typography\n        variant=\"h6\"\n        align=\"center\"\n        color=\"textSecondary\"\n        component=\"p\"\n        style={{ paddingTop: \"50px\" }}\n      >\n        There's nothing here right now,{\" \"}\n        <a\n          href={\"https://secretkeeperapp.wordpress.com/contact/\"}\n          style={{ color: \"inherit\" }}\n        >\n          {\" \"}\n          ask some questions!\n        </a>\n      </Typography>\n    </div>\n  );\n};\n\nexport default FAQContent;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Link } from \"react-router-dom\";\nimport LockIcon from \"@material-ui/icons/Lock\";\nimport HomeContent from \"./HomeContent\";\nimport GuideContentFunc from \"./GuideContent\";\nimport FAQContentFunc from \"./FAQContent\";\nimport { Route } from \"react-router-dom\";\nimport { Switch } from \"react-router\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\n\n// TODO: switch back to this once it's stable.\nimport { unstable_useMediaQuery as useMediaQuery } from \"@material-ui/core/useMediaQuery\";\nimport MediaQuery from \"react-responsive\";\n\nconst styles = theme => ({\n  \"@global\": {\n    body: {\n      backgroundColor: theme.palette.common.white\n    }\n  },\n  appBar: {\n    position: \"relative\",\n    width: \"100%\"\n  },\n  toolbarTitle: {\n    flex: 1\n  },\n  layout: {\n    width: \"auto\",\n    marginLeft: theme.spacing.unit * 3,\n    marginRight: theme.spacing.unit * 3,\n    [theme.breakpoints.up(900 + theme.spacing.unit * 3 * 2)]: {\n      width: 900,\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    }\n  },\n  heroContent: {\n    maxWidth: 800,\n    margin: \"0 auto\",\n    padding: `${theme.spacing.unit * 8}px 0 ${theme.spacing.unit * 6}px`\n  },\n  heroButtons: {\n    marginTop: theme.spacing.unit * 4\n  },\n  footer: {\n    marginTop: theme.spacing.unit * 8,\n    borderTop: `1px solid ${theme.palette.divider}`,\n    padding: `${theme.spacing.unit * 6}px 0`\n  },\n  icon: {\n    marginRight: theme.spacing.unit * 2\n  }\n});\n\nconst footers = [\n  {\n    title: \"Company\",\n    description: [\n      \"About\",\n      <a\n        href={\"https://secretkeeperapp.wordpress.com/contact/\"}\n        style={{ color: \"inherit\" }}\n      >\n        Contact\n      </a>\n    ]\n  },\n  {\n    title: \"Features\",\n    description: [\"Time delay\", \"Secret splitting\"]\n  },\n  {\n    title: \"Resources\",\n    description: [\n      <Link to={\"/guide\"} style={{ color: \"inherit\" }}>\n        Guide\n      </Link>,\n      <Link to={\"/faq\"} style={{ color: \"inherit\" }}>\n        FAQ\n      </Link>,\n      <a\n        href=\"https://github.com/secretkeeperapp/secret-keeper-site\"\n        style={{ color: \"inherit\" }}\n      >\n        Github repo\n      </a>\n    ]\n  },\n  {\n    title: \"Legal\",\n    description: [\"Disclaimer\", \"Terms of use\"]\n  }\n];\n\nclass Homepage extends React.Component {\n  state = {\n    anchorEl: null\n  };\n\n  handleMenuIconClick = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleMenuIconClose = event => {\n    this.setState({ anchorEl: null });\n  };\n\n  render() {\n    const { classes } = this.props;\n    // This means the user is on a mobile device.\n    const { anchorEl } = this.state;\n    //const displayMenuIcon = useMediaQuery(\"(max-device-width: 1224px)\");\n\n    const renderMenuIconMenu = () => {\n      return (\n        <React.Fragment>\n          <Button onClick={this.handleMenuIconClick}>\n            <MenuIcon\n              aria-owns={anchorEl ? \"simple-menu\" : undefined}\n              aria-haspopup=\"true\"\n            />\n          </Button>\n          <Menu\n            id=\"simple-menu\"\n            anchorEl={anchorEl}\n            open={Boolean(anchorEl)}\n            onClose={this.handleMenuIconClose}\n          >\n            <MenuItem onClick={this.handleMenuIconClose}>\n              <Link\n                to={\"/\"}\n                style={{ textDecoration: \"none\", color: \"inherit\" }}\n              >\n                Home\n              </Link>\n            </MenuItem>\n            <MenuItem onClick={this.handleMenuIconClose}>\n              <Link\n                to={\"/guide\"}\n                style={{ textDecoration: \"none\", color: \"inherit\" }}\n              >\n                Guide\n              </Link>\n            </MenuItem>\n            <MenuItem onClick={this.handleMenuIconClose}>\n              <a\n                href={\"http://www.secretkeeperapp.wordpress.com\"}\n                style={{ textDecoration: \"none\", color: \"inherit\" }}\n              >\n                Blog\n              </a>\n            </MenuItem>\n            <MenuItem>\n              <Link\n                to={\"/faq\"}\n                style={{ textDecoration: \"none\", color: \"inherit\" }}\n              >\n                FAQ\n              </Link>\n            </MenuItem>\n            <MenuItem>\n              <Link\n                to={\"/app\"}\n                style={{ color: \"blue\", textDecoration: \"none\" }}\n              >\n                App\n              </Link>\n            </MenuItem>\n          </Menu>\n        </React.Fragment>\n      );\n    };\n\n    const renderRegularMenu = () => {\n      return (\n        <React.Fragment>\n          <Link to={\"/\"} style={{ textDecoration: \"none\", color: \"inherit\" }}>\n            <Button>Home</Button>\n          </Link>\n          <Link\n            to={\"/guide\"}\n            style={{ textDecoration: \"none\", color: \"inherit\" }}\n          >\n            <Button>Guide</Button>\n          </Link>\n          <a\n            href={\"http://www.secretkeeperapp.wordpress.com\"}\n            style={{ textDecoration: \"none\", color: \"inherit\" }}\n          >\n            <Button>Blog</Button>\n          </a>\n          <Link to={\"/faq\"} style={{ textDecoration: \"none\" }}>\n            <Button>FAQ</Button>\n          </Link>\n          <Link to={\"/app\"} style={{ textDecoration: \"none\" }}>\n            <Button color=\"primary\" variant=\"outlined\">\n              App\n            </Button>\n          </Link>\n        </React.Fragment>\n      );\n    };\n\n    // See media query examples at https://github.com/contra/react-responsive\n    return (\n      <React.Fragment>\n        <CssBaseline />\n        <AppBar position=\"static\" color=\"default\" className={classes.appBar}>\n          <Toolbar>\n            <LockIcon className={classes.icon} />\n            <Typography\n              variant=\"h6\"\n              color=\"inherit\"\n              noWrap\n              className={classes.toolbarTitle}\n            >\n              <Link\n                to={\"/\"}\n                style={{ textDecoration: \"none\", color: \"inherit\" }}\n              >\n                SecretKeeper\n              </Link>\n            </Typography>\n\n            <MediaQuery query=\"(max-width: 1224px), (max-device-width: 1224px)\">\n              {renderMenuIconMenu()}\n            </MediaQuery>\n            <MediaQuery query=\"(min-device-width: 1224px) and (min-width: 1224px)\">\n              {renderRegularMenu()}\n            </MediaQuery>\n          </Toolbar>\n        </AppBar>\n        <Switch>\n          <Route exact path=\"/\" component={HomeContent(this.props)} />\n          <Route path=\"/guide\" component={GuideContentFunc(this.props)} />\n          <Route path=\"/faq\" component={FAQContentFunc(this.props)} />\n        </Switch>\n        {/* Footer */}\n        <footer className={classNames(classes.footer, classes.layout)}>\n          <Grid container spacing={32} justify=\"space-evenly\">\n            {footers.map((footer, ind) => (\n              <Grid item xs key={ind}>\n                <Typography variant=\"h6\" color=\"textPrimary\" gutterBottom>\n                  {footer.title}\n                </Typography>\n                {footer.description.map((item, ind) => (\n                  <Typography\n                    key={ind}\n                    variant=\"subtitle1\"\n                    color=\"textSecondary\"\n                  >\n                    {item}\n                  </Typography>\n                ))}\n              </Grid>\n            ))}\n          </Grid>\n        </footer>\n        {/* End footer */}\n        <Typography\n          variant=\"h6\"\n          color=\"inherit\"\n          align={\"center\"}\n          noWrap\n          style={{ paddingTop: \"50px\" }}\n          className={classes.toolbarTitle}\n        >\n          Copyright  2019 SecretKeeper.\n          <MediaQuery query={\"(max-width: 1224px)\"}>\n            <br />\n          </MediaQuery>\n          All rights reserved.\n        </Typography>\n      </React.Fragment>\n    );\n  }\n}\n\nHomepage.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Homepage);\n","import React from \"react\";\nimport { HashRouter as Router, Route } from \"react-router-dom\";\nimport MainApp from \"./MainApp\";\nimport Homepage from \"./Homepage\";\n\nclass Routing extends React.Component {\n  render() {\n    return (\n      <Router>\n        <div>\n          <Route exact path=\"/\" component={Home} />\n          {/* TODO: should this be a multi part route? */}\n          <Route exact path=\"/guide\" component={Home} />\n          <Route exact path={\"/faq\"} component={Home} />\n          <Route path=\"/app\" component={App} />\n        </div>\n      </Router>\n    );\n  }\n}\n\nfunction App() {\n  return <MainApp />;\n}\n\nfunction Home() {\n  return <Homepage />;\n}\n\nexport default Routing;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport ReactGA from \"react-ga\";\nimport Routing from \"./Routing\";\n\nfunction initializeReactGA() {\n  ReactGA.initialize(\"UA-99140189-2\");\n  ReactGA.pageview(\"/homepage\");\n}\n\ninitializeReactGA();\n\nReactDOM.render(<Routing />, document.querySelector(\"#root\"));\n","const web3Utils = require(\"web3-utils\");\nconst RLP = require(\"rlp\");\nconst forge = require(\"node-forge\"); //TODO: account for browser\nconst pki = forge.pki;\nconst BN = require(\"bn.js\");\nconst EthCrypto = require(\"eth-crypto\");\nconst EC = require(\"elliptic\").ec;\nconst Buffer = require(\"buffer/\").Buffer; // The node buffer in the browser\n\nconst INTEL_CA =\n  \"-----BEGIN CERTIFICATE-----\\n\" +\n  \"MIIFSzCCA7OgAwIBAgIJANEHdl0yo7CUMA0GCSqGSIb3DQEBCwUAMH4xCzAJBgNV\\n\" +\n  \"BAYTAlVTMQswCQYDVQQIDAJDQTEUMBIGA1UEBwwLU2FudGEgQ2xhcmExGjAYBgNV\\n\" +\n  \"BAoMEUludGVsIENvcnBvcmF0aW9uMTAwLgYDVQQDDCdJbnRlbCBTR1ggQXR0ZXN0\\n\" +\n  \"YXRpb24gUmVwb3J0IFNpZ25pbmcgQ0EwIBcNMTYxMTE0MTUzNzMxWhgPMjA0OTEy\\n\" +\n  \"MzEyMzU5NTlaMH4xCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJDQTEUMBIGA1UEBwwL\\n\" +\n  \"U2FudGEgQ2xhcmExGjAYBgNVBAoMEUludGVsIENvcnBvcmF0aW9uMTAwLgYDVQQD\\n\" +\n  \"DCdJbnRlbCBTR1ggQXR0ZXN0YXRpb24gUmVwb3J0IFNpZ25pbmcgQ0EwggGiMA0G\\n\" +\n  \"CSqGSIb3DQEBAQUAA4IBjwAwggGKAoIBgQCfPGR+tXc8u1EtJzLA10Feu1Wg+p7e\\n\" +\n  \"LmSRmeaCHbkQ1TF3Nwl3RmpqXkeGzNLd69QUnWovYyVSndEMyYc3sHecGgfinEeh\\n\" +\n  \"rgBJSEdsSJ9FpaFdesjsxqzGRa20PYdnnfWcCTvFoulpbFR4VBuXnnVLVzkUvlXT\\n\" +\n  \"L/TAnd8nIZk0zZkFJ7P5LtePvykkar7LcSQO85wtcQe0R1Raf/sQ6wYKaKmFgCGe\\n\" +\n  \"NpEJUmg4ktal4qgIAxk+QHUxQE42sxViN5mqglB0QJdUot/o9a/V/mMeH8KvOAiQ\\n\" +\n  \"byinkNndn+Bgk5sSV5DFgF0DffVqmVMblt5p3jPtImzBIH0QQrXJq39AT8cRwP5H\\n\" +\n  \"afuVeLHcDsRp6hol4P+ZFIhu8mmbI1u0hH3W/0C2BuYXB5PC+5izFFh/nP0lc2Lf\\n\" +\n  \"6rELO9LZdnOhpL1ExFOq9H/B8tPQ84T3Sgb4nAifDabNt/zu6MmCGo5U8lwEFtGM\\n\" +\n  \"RoOaX4AS+909x00lYnmtwsDVWv9vBiJCXRsCAwEAAaOByTCBxjBgBgNVHR8EWTBX\\n\" +\n  \"MFWgU6BRhk9odHRwOi8vdHJ1c3RlZHNlcnZpY2VzLmludGVsLmNvbS9jb250ZW50\\n\" +\n  \"L0NSTC9TR1gvQXR0ZXN0YXRpb25SZXBvcnRTaWduaW5nQ0EuY3JsMB0GA1UdDgQW\\n\" +\n  \"BBR4Q3t2pn680K9+QjfrNXw7hwFRPDAfBgNVHSMEGDAWgBR4Q3t2pn680K9+Qjfr\\n\" +\n  \"NXw7hwFRPDAOBgNVHQ8BAf8EBAMCAQYwEgYDVR0TAQH/BAgwBgEB/wIBADANBgkq\\n\" +\n  \"hkiG9w0BAQsFAAOCAYEAeF8tYMXICvQqeXYQITkV2oLJsp6J4JAqJabHWxYJHGir\\n\" +\n  \"IEqucRiJSSx+HjIJEUVaj8E0QjEud6Y5lNmXlcjqRXaCPOqK0eGRz6hi+ripMtPZ\\n\" +\n  \"sFNaBwLQVV905SDjAzDzNIDnrcnXyB4gcDFCvwDFKKgLRjOB/WAqgscDUoGq5ZVi\\n\" +\n  \"zLUzTqiQPmULAQaB9c6Oti6snEFJiCQ67JLyW/E83/frzCmO5Ru6WjU4tmsmy8Ra\\n\" +\n  \"Ud4APK0wZTGtfPXU7w+IBdG5Ez0kE1qzxGQaL4gINJ1zMyleDnbuS8UicjJijvqA\\n\" +\n  \"152Sq049ESDz+1rRGc2NVEqh1KaGXmtXvqxXcTB+Ljy5Bw2ke0v8iGngFBPqCTVB\\n\" +\n  \"3op5KBG3RjbF6RRSzwzuWfL7QErNC8WEy5yDVARzTA5+xmBc388v9Dm21HGfcC8O\\n\" +\n  \"DD+gT9sSpssq0ascmvH49MOgjt1yoysLtdCtJW/9FZpoOypaHx0R+mJTLwPXVMrv\\n\" +\n  \"DaVzWh5aiEx+idkSGMnX\\n\" +\n  \"-----END CERTIFICATE-----\";\n\nfunction readCert(pem) {\n  let cert;\n  try {\n    cert = pki.certificateFromPem(pem);\n  } catch (e) {\n    return {\n      verified: false,\n      err: \"Failed to load report certificate: \" + e\n    };\n  }\n  return cert;\n}\n\n/**\n * Parse the signer's address from the quote\n *\n * @param reportContent\n * @returns {string}\n */\nfunction parseAddress(reportContent) {\n  const report = JSON.parse(reportContent);\n  let b = new Buffer(report.isvEnclaveQuoteBody, \"base64\");\n  return b.slice(368, 410).toString();\n}\n\n/**\n * Verifies that the worker signer address is associated to an authentic SGX report\n *\n * @param signer\n * @param quote\n * @param report\n * @param reportCa\n * @param reportCert\n * @param reportSig\n */\nfunction verifyWorker(signer, encodedReport) {\n  const reportArgs = RLP.decode(encodedReport);\n  // console.log ('decoding report\\n', reportArgs[0], '\\n', reportArgs[1], '\\n', reportArgs[2]);\n  const report = reportArgs[0].toString(\"utf8\");\n  if (report == \"simulation\") {\n    return {\n      verified: true,\n      err: \"Running in simulation mode\"\n    };\n  }\n\n  const reportCert = reportArgs[1].toString(\"utf8\");\n  const reportSig = reportArgs[2];\n\n  const cert = readCert(reportCert);\n  let md = forge.md.sha256.create();\n  md.update(report, \"utf8\");\n\n  try {\n    // verify data with a public key\n    // (defaults to RSASSA PKCS#1 v1.5)\n    // TODO: verify that the public key belongs to the signer\n    const verified = cert.publicKey.verify(md.digest().bytes(), reportSig);\n    if (!verified) {\n      return {\n        verified: false,\n        err: \"The signature does not match the signed report\"\n      };\n    }\n  } catch (e) {\n    return {\n      verified: false,\n      err: \"Failed to verify the report signature: \" + e\n    };\n  }\n\n  let caStore;\n  try {\n    caStore = pki.createCaStore([INTEL_CA]);\n  } catch (e) {\n    return {\n      verified: false,\n      err: \"Failed to load CA certificate: \" + e\n    };\n  }\n\n  try {\n    pki.verifyCertificateChain(caStore, [cert]);\n  } catch (e) {\n    return {\n      verified: false,\n      err: \"Failed to verify certificate: \" + e\n    };\n  }\n\n  const address = parseAddress(report);\n  if (address !== signer) {\n    return {\n      verified: false,\n      err:\n        \"Signer address does not match the report: \" + signer + \" != \" + address\n    };\n  }\n\n  return { verified: true, err: undefined };\n}\n\n/**\n * Generate a taskId using a hash of all inputs\n * The Enigma contract uses the same logic to generate a matching taskId\n *\n * @param dappContract\n * @param callable\n * @param callableArgs\n * @param blockNumber\n * @returns {Object}\n */\nfunction generateTaskId(dappContract, callable, callableArgs, blockNumber) {\n  const taskId = web3Utils.soliditySha3(\n    { t: \"address\", v: dappContract },\n    { t: \"string\", v: callable },\n    { t: \"bytes\", v: callableArgs },\n    { t: \"uint256\", v: blockNumber }\n  );\n  return taskId;\n}\n\n/**\n * Running a pseudo-random algo which discovers the worker selected for the task\n *\n * @param seed\n * @param taskId\n * @param workers\n */\nfunction selectWorker(seed, taskId, workers) {\n  const hash = web3Utils.soliditySha3(\n    { t: \"uint256\", v: seed },\n    { t: \"bytes32\", v: taskId }\n  );\n  // The JS % operator does not produce the correct output\n  const index = web3Utils.toBN(hash).mod(web3Utils.toBN(workers.length));\n  const selectedWorker = workers[index];\n\n  return selectedWorker;\n}\n\n/**\n * RLP encode report parts\n *\n * @param report\n * @param cert\n * @param sig\n * @returns {string}\n */\nfunction encodeReport(report, cert, sig) {\n  return \"0x\" + RLP.encode([report, cert, sig]).toString(\"hex\");\n}\n\n/**\n * Verifies that the specified method signature matches the specs defined\n * by the Ethereum abi: https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI#function-selector-and-argument-encoding\n * @param methodSig\n * @returns {boolean}\n */\nfunction checkMethodSignature(methodSig) {\n  const rx = /\\b\\((.*?)\\)/g;\n  const result = rx.test(methodSig);\n  return result;\n}\n\n/**\n * Generate an Ethereum-like address from a public key\n *\n * @param publicKey\n * @returns {*|string}\n */\nfunction toAddress(publicKey) {\n  const address = EthCrypto.publicKey.toAddress(publicKey);\n  return address;\n}\n\n/**\n * Sign a message with the specified private key\n *\n * @param privateKey\n * @param message\n * @returns {string}\n */\nfunction sign(privateKey, message) {\n  const signature = EthCrypto.sign(privateKey, message);\n  return signature;\n}\n\n/**\n * This does ECDH key derivation from 2 EC secp256k1 keys.\n * It does so by multiplying the public points by the private point of the over key.\n * This results in a X and Y. it then replaces the Y with 0x02 if Y is even and 0x03 if it's odd.\n * Then it hashes the new Y together with the X using SHA256.\n * Multiplication: https://github.com/indutny/elliptic/blob/master/lib/elliptic/ec/key.js#L104\n * Replacing Y: https://source.that.world/source/libsecp256k1-rs/browse/master/src/ecdh.rs$25\n *\n * @param {string} enclavePublicKey\n * @param {string} clientPrivateKey\n * @returns {string}\n */\nfunction getDerivedKey(enclavePublicKey, clientPrivateKey) {\n  let ec = new EC(\"secp256k1\");\n  if (enclavePublicKey.slice(0, 2) != \"04\") {\n    enclavePublicKey = \"04\" + enclavePublicKey;\n  }\n  let client_key = ec.keyFromPrivate(clientPrivateKey, \"hex\");\n  let enclave_key = ec.keyFromPublic(enclavePublicKey, \"hex\");\n\n  let shared_points = enclave_key.getPublic().mul(client_key.getPrivate());\n\n  let y = 0x02 | (shared_points.getY().isOdd() ? 1 : 0);\n  let x = shared_points.getX();\n  let y_buffer = Buffer.from([y]);\n  let x_buffer = Buffer.from(x.toString(16), \"hex\");\n\n  let sha256 = forge.md.sha256.create();\n  sha256.update(y_buffer.toString(\"binary\"));\n  sha256.update(x_buffer.toString(\"binary\"));\n\n  return sha256.digest().toHex();\n}\n\n/**\n * Decrypts the encrypted message:\n * Message format: encrypted_message[*]tag[16]iv[12] (represented as: var_name[len])\n *\n * @param {string} key_hex\n * @param {string} msg\n * @returns {string}\n */\nfunction decryptMessage(key_hex, msg) {\n  let key = forge.util.hexToBytes(key_hex);\n  let msg_buf = Buffer.from(msg, \"hex\");\n  let iv = forge.util.createBuffer(msg_buf.slice(-12).toString(\"binary\"));\n  let tag = forge.util.createBuffer(msg_buf.slice(-28, -12).toString(\"binary\"));\n  const decipher = forge.cipher.createDecipher(\"AES-GCM\", key);\n\n  decipher.start({ iv: iv, tag: tag });\n  decipher.update(\n    forge.util.createBuffer(msg_buf.slice(0, -28).toString(\"binary\"))\n  );\n  if (decipher.finish()) {\n    return decipher.output.getBytes();\n  }\n}\n\n/**\n * Encrypts a message using the provided key.\n * Supports: String, Numbers, BN.JS objects.\n * Returns an encrypted message in this format:\n * encrypted_message[*]tag[16]iv[12] (represented as: var_name[len])\n *\n * If you pass numbers, it's best to pass them as BN.js.\n * @param {string} key_hex\n * @param {string} msg\n * @param {string} iv\n * @returns {string}\n */\nfunction encryptMessage(key_hex, msg, iv = forge.random.getBytesSync(12)) {\n  // TODO: Add support for bn.js\n  let msg_buf;\n  switch (typeof msg) {\n    case \"string\":\n      msg_buf = forge.util.createBuffer(msg);\n      break;\n    case \"number\":\n      // Consider optimizing the bit size (putInt32/16/8)\n      // or remove number support entirely in favor of BN.js\n      msg_buf = forge.util.createBuffer();\n      msg_buf.putInt32(msg);\n      break;\n    case \"object\":\n      if (BN.isBN(msg)) {\n        msg_buf = forge.util.createBuffer(msg.toBuffer().toString(\"binary\"));\n      }\n      break;\n    default:\n      throw new Error(\"The message is not a string or a number\");\n  }\n  let key = forge.util.hexToBytes(key_hex);\n  const cipher = forge.cipher.createCipher(\"AES-GCM\", key);\n\n  cipher.start({ iv: iv });\n  cipher.update(msg_buf);\n  cipher.finish();\n\n  let result = cipher.output.putBuffer(cipher.mode.tag).putBytes(iv);\n  return result.toHex();\n}\n\nexports.readCert = readCert;\nexports.encodeReport = encodeReport;\nexports.test = () => \"hello2\";\nexports.generateTaskId = generateTaskId;\nexports.verifyWorker = verifyWorker;\nexports.selectWorker = selectWorker;\nexports.checkMethodSignature = checkMethodSignature;\nexports.toAddress = toAddress;\nexports.sign = sign;\nexports.getDerivedKey = getDerivedKey;\nexports.encryptMessage = encryptMessage;\nexports.decryptMessage = decryptMessage;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 430;","module.exports = __webpack_public_path__ + \"static/media/hardware_wallet_instructions.917b98ec.md\";"],"sourceRoot":""}